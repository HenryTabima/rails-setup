<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>Debugging Rails Applications · Rails Setup</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta name="description" content="&lt;p&gt;This guide introduces techniques for debugging Ruby on Rails applications.&lt;/p&gt;
"/><meta name="docsearch:language" content="en"/><meta property="og:title" content="Debugging Rails Applications · Rails Setup"/><meta property="og:type" content="website"/><meta property="og:url" content="https://HenryTabima.github.io/rails-setup/"/><meta property="og:description" content="&lt;p&gt;This guide introduces techniques for debugging Ruby on Rails applications.&lt;/p&gt;
"/><meta property="og:image" content="https://HenryTabima.github.io/rails-setup/img/undraw_online.svg"/><meta name="twitter:card" content="summary"/><meta name="twitter:image" content="https://HenryTabima.github.io/rails-setup/img/undraw_tweetstorm.svg"/><link rel="shortcut icon" href="/rails-setup/img/favicon.ico"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css"/><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><script src="/rails-setup/js/scrollSpy.js"></script><link rel="stylesheet" href="/rails-setup/css/main.css"/><script src="/rails-setup/js/codetabs.js"></script></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/rails-setup/"><img class="logo" src="/rails-setup/img/favicon.ico" alt="Rails Setup"/><h2 class="headerTitleWithLogo">Rails Setup</h2></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class="siteNavGroupActive"><a href="/rails-setup/docs/rails/getting-started" target="_self">Rails</a></li><li class=""><a href="/rails-setup/docs/devise/overview" target="_self">Devise</a></li><li class=""><a href="https://github.com/HenryTabima/rails-setup" target="_self">GitHub</a></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="container docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><div class="hamburger-menu"><div class="line1"></div><div class="line2"></div><div class="line3"></div></div></div><h2><i>›</i><span>Digging Deeper</span></h2><div class="tocToggler" id="tocToggler"><i class="icon-toc"></i></div></div><div class="navGroups"><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Start Here<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/rails-setup/docs/rails/getting-started">Getting Started with Rails</a></li><li class="navListItem"><a class="navItem" href="/rails-setup/docs/rails/development-dependencies-install">Development Dependencies Install</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Models<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/rails-setup/docs/rails/active-record-basics">Active Record Basics</a></li><li class="navListItem"><a class="navItem" href="/rails-setup/docs/rails/active-record-migrations">Active Record Migrations</a></li><li class="navListItem"><a class="navItem" href="/rails-setup/docs/rails/active-record-validations">Active Record Validations</a></li><li class="navListItem"><a class="navItem" href="/rails-setup/docs/rails/active-record-callbacks">Active Record Callbacks</a></li><li class="navListItem"><a class="navItem" href="/rails-setup/docs/rails/active-record-associations">Active Record Associations</a></li><li class="navListItem"><a class="navItem" href="/rails-setup/docs/rails/active-record-query">Active Record Query Interface</a></li><li class="navListItem"><a class="navItem" href="/rails-setup/docs/rails/multiple-databases">Multiple Databases with Active Record</a></li><li class="navListItem"><a class="navItem" href="/rails-setup/docs/rails/active-record-postgresql">Active Record and PostgreSQL</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Views<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/rails-setup/docs/rails/layouts-and-rendering">Layouts and Rendering in Rails</a></li><li class="navListItem"><a class="navItem" href="/rails-setup/docs/rails/action-view">Action View Overview</a></li><li class="navListItem"><a class="navItem" href="/rails-setup/docs/rails/action-view-form-helpers">Action View Form Helpers</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Controllers<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/rails-setup/docs/rails/action-controller">Action Controller Overview</a></li><li class="navListItem"><a class="navItem" href="/rails-setup/docs/rails/rails-routing">Rails Routing from the Outside In</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Other Components<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/rails-setup/docs/rails/active-support-core">Active Support Core Extensions</a></li><li class="navListItem"><a class="navItem" href="/rails-setup/docs/rails/active-support-instrumentation">Active Support Instrumentation</a></li><li class="navListItem"><a class="navItem" href="/rails-setup/docs/rails/action-mailer">Action Mailer Basics</a></li><li class="navListItem"><a class="navItem" href="/rails-setup/docs/rails/action-mailbox">Action Mailbox Basics</a></li><li class="navListItem"><a class="navItem" href="/rails-setup/docs/rails/active-model">Active Model Basics</a></li><li class="navListItem"><a class="navItem" href="/rails-setup/docs/rails/active-job">Active Job Basics</a></li><li class="navListItem"><a class="navItem" href="/rails-setup/docs/rails/action-text">Action Text Overview</a></li><li class="navListItem"><a class="navItem" href="/rails-setup/docs/rails/active-storage">Active Storage Overview</a></li><li class="navListItem"><a class="navItem" href="/rails-setup/docs/rails/action-cable">Action Cable Overview</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Digging Deeper<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/rails-setup/docs/rails/rails-i18n">Rails Internationalization (I18n) API</a></li><li class="navListItem"><a class="navItem" href="/rails-setup/docs/rails/testing-rails">Testing Rails Applications</a></li><li class="navListItem"><a class="navItem" href="/rails-setup/docs/rails/securing-rails">Securing Rails Applications</a></li><li class="navListItem navListItemActive"><a class="navItem" href="/rails-setup/docs/rails/debugging-rails">Debugging Rails Applications</a></li><li class="navListItem"><a class="navItem" href="/rails-setup/docs/rails/configuring-rails">Configuring Rails Applications</a></li><li class="navListItem"><a class="navItem" href="/rails-setup/docs/rails/rails-command-line">The Rails Command Line</a></li><li class="navListItem"><a class="navItem" href="/rails-setup/docs/rails/asset-pipeline">The Asset Pipeline</a></li><li class="navListItem"><a class="navItem" href="/rails-setup/docs/rails/working-with-javascript">Working with JavaScript in Rails</a></li><li class="navListItem"><a class="navItem" href="/rails-setup/docs/rails/autoloading-and-reloading">Autoloading and Reloading Constants</a></li><li class="navListItem"><a class="navItem" href="/rails-setup/docs/rails/caching-with-rails">Caching with Rails: An Overview</a></li><li class="navListItem"><a class="navItem" href="/rails-setup/docs/rails/api-only-apps">Using Rails for API-only Applications</a></li><li class="navListItem"><a class="navItem" href="/rails-setup/docs/rails/threading">Threading and Code Execution in Rails</a></li><li class="navListItem"><a class="navItem" href="/rails-setup/docs/rails/initialization">The Rails Initialization Process</a></li><li class="navListItem"><a class="navItem" href="/rails-setup/docs/rails/engines">Getting Started with Engines</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Extending Rails<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/rails-setup/docs/rails/rails-on-rack">Rails on Rack</a></li><li class="navListItem"><a class="navItem" href="/rails-setup/docs/rails/generators-&amp;-templates">Creating and Customizing Rails Generators &amp; Templates</a></li><li class="navListItem"><a class="navItem" href="/rails-setup/docs/rails/application-templates">Rails Application Templates</a></li><li class="navListItem"><a class="navItem" href="/rails-setup/docs/rails/creating-rails-plugins">The Basics of Creating Rails Plugins</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Contributions<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/rails-setup/docs/rails/contributing-to-rails">Contributing to Ruby on Rails</a></li><li class="navListItem"><a class="navItem" href="/rails-setup/docs/rails/api-documentation">API Documentation Guidelines</a></li><li class="navListItem"><a class="navItem" href="/rails-setup/docs/rails/guides-guidelines">Ruby on Rails Guides Guidelines</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Policies<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/rails-setup/docs/rails/maintenance-policy">Maintenance Policy for Ruby on Rails</a></li></ul></div></div></section></div><script>
            var coll = document.getElementsByClassName('collapsible');
            var checkActiveCategory = true;
            for (var i = 0; i < coll.length; i++) {
              var links = coll[i].nextElementSibling.getElementsByTagName('*');
              if (checkActiveCategory){
                for (var j = 0; j < links.length; j++) {
                  if (links[j].classList.contains('navListItemActive')){
                    coll[i].nextElementSibling.classList.toggle('hide');
                    coll[i].childNodes[1].classList.toggle('rotate');
                    checkActiveCategory = false;
                    break;
                  }
                }
              }

              coll[i].addEventListener('click', function() {
                var arrow = this.childNodes[1];
                arrow.classList.toggle('rotate');
                var content = this.nextElementSibling;
                content.classList.toggle('hide');
              });
            }

            document.addEventListener('DOMContentLoaded', function() {
              createToggler('#navToggler', '#docsNav', 'docsSliderActive');
              createToggler('#tocToggler', 'body', 'tocActive');

              var headings = document.querySelector('.toc-headings');
              headings && headings.addEventListener('click', function(event) {
                var el = event.target;
                while(el !== headings){
                  if (el.tagName === 'A') {
                    document.body.classList.remove('tocActive');
                    break;
                  } else{
                    el = el.parentNode;
                  }
                }
              }, false);

              function createToggler(togglerSelector, targetSelector, className) {
                var toggler = document.querySelector(togglerSelector);
                var target = document.querySelector(targetSelector);

                if (!toggler) {
                  return;
                }

                toggler.onclick = function(event) {
                  event.preventDefault();

                  target.classList.toggle(className);
                };
              }
            });
        </script></nav></div><div class="container mainContainer"><div class="wrapper"><div class="post"><header class="postHeader"><h1 class="postHeaderTitle">Debugging Rails Applications</h1></header><article><div><span><p>This guide introduces techniques for debugging Ruby on Rails applications.</p>
<p>After reading this guide, you will know:</p>
<ul>
<li>The purpose of debugging.</li>
<li>How to track down problems and issues in your application that your tests aren't identifying.</li>
<li>The different ways of debugging.</li>
<li>How to analyze the stack trace.</li>
</ul>
<hr>
<h2><a class="anchor" aria-hidden="true" id="view-helpers-for-debugging"></a><a href="#view-helpers-for-debugging" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>View Helpers for Debugging</h2>
<p>One common task is to inspect the contents of a variable. Rails provides three different ways to do this:</p>
<ul>
<li><code>debug</code></li>
<li><code>to_yaml</code></li>
<li><code>inspect</code></li>
</ul>
<h3><a class="anchor" aria-hidden="true" id="debug"></a><a href="#debug" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>debug</code></h3>
<p>The <code>debug</code> helper will return a &lt;pre&gt; tag that renders the object using the YAML format. This will generate human-readable data from any object. For example, if you have this code in a view:</p>
<pre><code class="hljs css language-html+erb"><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">%=</span></span></span><span class="ruby"> debug @article </span><span class="xml"><span class="hljs-tag">%&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">b</span>&gt;</span>Title:<span class="hljs-tag">&lt;/<span class="hljs-name">b</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">%=</span></span></span><span class="ruby"> @article.title </span><span class="xml"><span class="hljs-tag">%&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
</span></code></pre>
<p>You'll see something like this:</p>
<pre><code class="hljs css language-yaml"><span class="hljs-bullet">-</span><span class="hljs-bullet">--</span> <span class="hljs-type">!ruby</span><span class="hljs-string">/object</span> <span class="hljs-string">Article</span>
<span class="hljs-attr">attributes:</span>
<span class="hljs-attr">  updated_at:</span> <span class="hljs-number">2008</span><span class="hljs-bullet">-09</span><span class="hljs-bullet">-05</span> <span class="hljs-number">22</span><span class="hljs-string">:55:47</span>
<span class="hljs-attr">  body:</span> <span class="hljs-string">It's</span> <span class="hljs-string">a</span> <span class="hljs-string">very</span> <span class="hljs-string">helpful</span> <span class="hljs-string">guide</span> <span class="hljs-string">for</span> <span class="hljs-string">debugging</span> <span class="hljs-string">your</span> <span class="hljs-string">Rails</span> <span class="hljs-string">app.</span>
<span class="hljs-attr">  title:</span> <span class="hljs-string">Rails</span> <span class="hljs-string">debugging</span> <span class="hljs-string">guide</span>
<span class="hljs-attr">  published:</span> <span class="hljs-string">t</span>
<span class="hljs-attr">  id:</span> <span class="hljs-string">"1"</span>
<span class="hljs-attr">  created_at:</span> <span class="hljs-number">2008</span><span class="hljs-bullet">-09</span><span class="hljs-bullet">-05</span> <span class="hljs-number">22</span><span class="hljs-string">:55:47</span>
<span class="hljs-attr">attributes_cache:</span> <span class="hljs-string">{}</span>


<span class="hljs-attr">Title:</span> <span class="hljs-string">Rails</span> <span class="hljs-string">debugging</span> <span class="hljs-string">guide</span>
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="to_yaml"></a><a href="#to_yaml" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>to_yaml</code></h3>
<p>Alternatively, calling <code>to_yaml</code> on any object converts it to YAML. You can pass this converted object into the <code>simple_format</code> helper method to format the output. This is how <code>debug</code> does its magic.</p>
<pre><code class="hljs css language-html+erb"><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">%=</span></span></span><span class="ruby"> simple_format @article.to_yaml </span><span class="xml"><span class="hljs-tag">%&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">b</span>&gt;</span>Title:<span class="hljs-tag">&lt;/<span class="hljs-name">b</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">%=</span></span></span><span class="ruby"> @article.title </span><span class="xml"><span class="hljs-tag">%&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
</span></code></pre>
<p>The above code will render something like this:</p>
<pre><code class="hljs css language-yaml"><span class="hljs-bullet">-</span><span class="hljs-bullet">--</span> <span class="hljs-type">!ruby</span><span class="hljs-string">/object</span> <span class="hljs-string">Article</span>
<span class="hljs-attr">attributes:</span>
<span class="hljs-attr">updated_at:</span> <span class="hljs-number">2008</span><span class="hljs-bullet">-09</span><span class="hljs-bullet">-05</span> <span class="hljs-number">22</span><span class="hljs-string">:55:47</span>
<span class="hljs-attr">body:</span> <span class="hljs-string">It's</span> <span class="hljs-string">a</span> <span class="hljs-string">very</span> <span class="hljs-string">helpful</span> <span class="hljs-string">guide</span> <span class="hljs-string">for</span> <span class="hljs-string">debugging</span> <span class="hljs-string">your</span> <span class="hljs-string">Rails</span> <span class="hljs-string">app.</span>
<span class="hljs-attr">title:</span> <span class="hljs-string">Rails</span> <span class="hljs-string">debugging</span> <span class="hljs-string">guide</span>
<span class="hljs-attr">published:</span> <span class="hljs-string">t</span>
<span class="hljs-attr">id:</span> <span class="hljs-string">"1"</span>
<span class="hljs-attr">created_at:</span> <span class="hljs-number">2008</span><span class="hljs-bullet">-09</span><span class="hljs-bullet">-05</span> <span class="hljs-number">22</span><span class="hljs-string">:55:47</span>
<span class="hljs-attr">attributes_cache:</span> <span class="hljs-string">{}</span>

<span class="hljs-attr">Title:</span> <span class="hljs-string">Rails</span> <span class="hljs-string">debugging</span> <span class="hljs-string">guide</span>
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="inspect"></a><a href="#inspect" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>inspect</code></h3>
<p>Another useful method for displaying object values is <code>inspect</code>, especially when working with arrays or hashes. This will print the object value as a string. For example:</p>
<pre><code class="hljs css language-html+erb"><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">%=</span></span></span><span class="ruby"> [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>].inspect </span><span class="xml"><span class="hljs-tag">%&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">b</span>&gt;</span>Title:<span class="hljs-tag">&lt;/<span class="hljs-name">b</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">%=</span></span></span><span class="ruby"> @article.title </span><span class="xml"><span class="hljs-tag">%&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
</span></code></pre>
<p>Will render:</p>
<pre><code class="hljs">[<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>]

Title: Rails debugging guide
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="the-logger"></a><a href="#the-logger" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>The Logger</h2>
<p>It can also be useful to save information to log files at runtime. Rails maintains a separate log file for each runtime environment.</p>
<h3><a class="anchor" aria-hidden="true" id="what-is-the-logger"></a><a href="#what-is-the-logger" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>What is the Logger?</h3>
<p>Rails makes use of the <code>ActiveSupport::Logger</code> class to write log information. Other loggers, such as <code>Log4r</code>, may also be substituted.</p>
<p>You can specify an alternative logger in <code>config/application.rb</code> or any other environment file, for example:</p>
<pre><code class="hljs css language-ruby">config.logger = Logger.new(STDOUT)
config.logger = Log4r::Logger.new(<span class="hljs-string">"Application Log"</span>)
</code></pre>
<p>Or in the <code>Initializer</code> section, add <em>any</em> of the following</p>
<pre><code class="hljs css language-ruby">Rails.logger = Logger.new(STDOUT)
Rails.logger = Log4r::Logger.new(<span class="hljs-string">"Application Log"</span>)
</code></pre>
<p>TIP: By default, each log is created under <code>Rails.root/log/</code> and the log file is named after the environment in which the application is running.</p>
<h3><a class="anchor" aria-hidden="true" id="log-levels"></a><a href="#log-levels" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Log Levels</h3>
<p>When something is logged, it's printed into the corresponding log if the log
level of the message is equal to or higher than the configured log level. If you
want to know the current log level, you can call the <code>Rails.logger.level</code>
method.</p>
<p>The available log levels are: <code>:debug</code>, <code>:info</code>, <code>:warn</code>, <code>:error</code>, <code>:fatal</code>,
and <code>:unknown</code>, corresponding to the log level numbers from 0 up to 5,
respectively. To change the default log level, use</p>
<pre><code class="hljs css language-ruby">config.log_level = <span class="hljs-symbol">:warn</span> <span class="hljs-comment"># In any environment initializer, or</span>
Rails.logger.level = <span class="hljs-number">0</span> <span class="hljs-comment"># at any time</span>
</code></pre>
<p>This is useful when you want to log under development or staging without flooding your production log with unnecessary information.</p>
<p>TIP: The default Rails log level is <code>debug</code> in all environments.</p>
<h3><a class="anchor" aria-hidden="true" id="sending-messages"></a><a href="#sending-messages" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Sending Messages</h3>
<p>To write in the current log use the <code>logger.(debug|info|warn|error|fatal|unknown)</code> method from within a controller, model, or mailer:</p>
<pre><code class="hljs css language-ruby">logger.debug <span class="hljs-string">"Person attributes hash: <span class="hljs-subst">#{@person.attributes.inspect}</span>"</span>
logger.info <span class="hljs-string">"Processing the request..."</span>
logger.fatal <span class="hljs-string">"Terminating application, raised unrecoverable error!!!"</span>
</code></pre>
<p>Here's an example of a method instrumented with extra logging:</p>
<pre><code class="hljs css language-ruby"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ArticlesController</span> &lt; ApplicationController</span>
  <span class="hljs-comment"># ...</span>

  <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">create</span></span>
    @article = Article.new(article_params)
    logger.debug <span class="hljs-string">"New article: <span class="hljs-subst">#{@article.attributes.inspect}</span>"</span>
    logger.debug <span class="hljs-string">"Article should be valid: <span class="hljs-subst">#{@article.valid?}</span>"</span>

    <span class="hljs-keyword">if</span> @article.save
      logger.debug <span class="hljs-string">"The article was saved and now the user is going to be redirected..."</span>
      redirect_to @article, <span class="hljs-symbol">notice:</span> <span class="hljs-string">'Article was successfully created.'</span>
    <span class="hljs-keyword">else</span>
      render <span class="hljs-symbol">:new</span>
    <span class="hljs-keyword">end</span>
  <span class="hljs-keyword">end</span>

  <span class="hljs-comment"># ...</span>

  private
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">article_params</span></span>
      params.<span class="hljs-keyword">require</span>(<span class="hljs-symbol">:article</span>).permit(<span class="hljs-symbol">:title</span>, <span class="hljs-symbol">:body</span>, <span class="hljs-symbol">:published</span>)
    <span class="hljs-keyword">end</span>
<span class="hljs-keyword">end</span>
</code></pre>
<p>Here's an example of the log generated when this controller action is executed:</p>
<pre><code class="hljs">Started POST <span class="hljs-string">"/articles"</span> <span class="hljs-keyword">for</span> <span class="hljs-number">127.0</span><span class="hljs-number">.0</span><span class="hljs-number">.1</span> at <span class="hljs-number">2018</span><span class="hljs-number">-10</span><span class="hljs-number">-18</span> <span class="hljs-number">20</span>:<span class="hljs-number">09</span>:<span class="hljs-number">23</span> <span class="hljs-number">-0400</span>
Processing by ArticlesController#create <span class="hljs-keyword">as</span> HTML
  Parameters: {<span class="hljs-string">"utf8"</span>=&gt;<span class="hljs-string">"✓"</span>, <span class="hljs-string">"authenticity_token"</span>=&gt;<span class="hljs-string">"XLveDrKzF1SwaiNRPTaMtkrsTzedtebPPkmxEFIU0ordLjICSnXsSNfrdMa4ccyBjuGwnnEiQhEoMN6H1Gtz3A=="</span>, <span class="hljs-string">"article"</span>=&gt;{<span class="hljs-string">"title"</span>=&gt;<span class="hljs-string">"Debugging Rails"</span>, <span class="hljs-string">"body"</span>=&gt;<span class="hljs-string">"I'm learning how to print in logs."</span>, <span class="hljs-string">"published"</span>=&gt;<span class="hljs-string">"0"</span>}, <span class="hljs-string">"commit"</span>=&gt;<span class="hljs-string">"Create Article"</span>}
New article: {<span class="hljs-string">"id"</span>=&gt;nil, <span class="hljs-string">"title"</span>=&gt;<span class="hljs-string">"Debugging Rails"</span>, <span class="hljs-string">"body"</span>=&gt;<span class="hljs-string">"I'm learning how to print in logs."</span>, <span class="hljs-string">"published"</span>=&gt;<span class="hljs-keyword">false</span>, <span class="hljs-string">"created_at"</span>=&gt;nil, <span class="hljs-string">"updated_at"</span>=&gt;nil}
Article should be valid: <span class="hljs-keyword">true</span>
   (<span class="hljs-number">0.0</span>ms)  begin transaction
  ↳ app/controllers/articles_controller.rb:<span class="hljs-number">31</span>
  Article Create (<span class="hljs-number">0.5</span>ms)  INSERT INTO <span class="hljs-string">"articles"</span> (<span class="hljs-string">"title"</span>, <span class="hljs-string">"body"</span>, <span class="hljs-string">"published"</span>, <span class="hljs-string">"created_at"</span>, <span class="hljs-string">"updated_at"</span>) VALUES (?, ?, ?, ?, ?)  [[<span class="hljs-string">"title"</span>, <span class="hljs-string">"Debugging Rails"</span>], [<span class="hljs-string">"body"</span>, <span class="hljs-string">"I'm learning how to print in logs."</span>], [<span class="hljs-string">"published"</span>, <span class="hljs-number">0</span>], [<span class="hljs-string">"created_at"</span>, <span class="hljs-string">"2018-10-19 00:09:23.216549"</span>], [<span class="hljs-string">"updated_at"</span>, <span class="hljs-string">"2018-10-19 00:09:23.216549"</span>]]
  ↳ app/controllers/articles_controller.rb:<span class="hljs-number">31</span>
   (<span class="hljs-number">2.3</span>ms)  commit transaction
  ↳ app/controllers/articles_controller.rb:<span class="hljs-number">31</span>
The article was saved and now the user <span class="hljs-keyword">is</span> going to be redirected...
Redirected to http:<span class="hljs-comment">//localhost:3000/articles/1</span>
Completed <span class="hljs-number">302</span> Found <span class="hljs-keyword">in</span> <span class="hljs-number">4</span>ms (ActiveRecord: <span class="hljs-number">0.8</span>ms)
</code></pre>
<p>Adding extra logging like this makes it easy to search for unexpected or unusual behavior in your logs. If you add extra logging, be sure to make sensible use of log levels to avoid filling your production logs with useless trivia.</p>
<h3><a class="anchor" aria-hidden="true" id="verbose-query-logs"></a><a href="#verbose-query-logs" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Verbose Query Logs</h3>
<p>When looking at database query output in logs, it may not be immediately clear why multiple database queries are triggered when a single method is called:</p>
<pre><code class="hljs">irb(main):<span class="hljs-number">001</span>:<span class="hljs-number">0</span>&gt; Article.pamplemousse
  Article <span class="hljs-keyword">Load</span> (<span class="hljs-number">0.4</span>ms)  <span class="hljs-keyword">SELECT</span> "articles".* <span class="hljs-keyword">FROM</span> "articles"
  <span class="hljs-keyword">Comment</span> <span class="hljs-keyword">Load</span> (<span class="hljs-number">0.2</span>ms)  <span class="hljs-keyword">SELECT</span> "comments".* <span class="hljs-keyword">FROM</span> "comments" <span class="hljs-keyword">WHERE</span> "comments"."article_id" = ?  [["article_id", <span class="hljs-number">1</span>]]
  <span class="hljs-keyword">Comment</span> <span class="hljs-keyword">Load</span> (<span class="hljs-number">0.1</span>ms)  <span class="hljs-keyword">SELECT</span> "comments".* <span class="hljs-keyword">FROM</span> "comments" <span class="hljs-keyword">WHERE</span> "comments"."article_id" = ?  [["article_id", <span class="hljs-number">2</span>]]
  <span class="hljs-keyword">Comment</span> <span class="hljs-keyword">Load</span> (<span class="hljs-number">0.1</span>ms)  <span class="hljs-keyword">SELECT</span> "comments".* <span class="hljs-keyword">FROM</span> "comments" <span class="hljs-keyword">WHERE</span> "comments"."article_id" = ?  [["article_id", <span class="hljs-number">3</span>]]
=&gt; #&lt;<span class="hljs-keyword">Comment</span> id: <span class="hljs-number">2</span>, author: "1", body: "Well, actually...", article_id: <span class="hljs-number">1</span>, created_at: "2018-10-19 00:56:10", updated_at: "2018-10-19 00:56:10"&gt;
</code></pre>
<p>After running <code>ActiveRecord::Base.verbose_query_logs = true</code> in the <code>rails console</code> session to enable verbose query logs and running the method again, it becomes obvious what single line of code is generating all these discrete database calls:</p>
<pre><code class="hljs">irb(main):<span class="hljs-number">003</span>:<span class="hljs-number">0</span>&gt; Article.pamplemousse
  Article <span class="hljs-keyword">Load</span> (<span class="hljs-number">0.2</span>ms)  <span class="hljs-keyword">SELECT</span> "articles".* <span class="hljs-keyword">FROM</span> "articles"
  ↳ app/models/article.rb:<span class="hljs-number">5</span>
  <span class="hljs-keyword">Comment</span> <span class="hljs-keyword">Load</span> (<span class="hljs-number">0.1</span>ms)  <span class="hljs-keyword">SELECT</span> "comments".* <span class="hljs-keyword">FROM</span> "comments" <span class="hljs-keyword">WHERE</span> "comments"."article_id" = ?  [["article_id", <span class="hljs-number">1</span>]]
  ↳ app/models/article.rb:<span class="hljs-number">6</span>
  <span class="hljs-keyword">Comment</span> <span class="hljs-keyword">Load</span> (<span class="hljs-number">0.1</span>ms)  <span class="hljs-keyword">SELECT</span> "comments".* <span class="hljs-keyword">FROM</span> "comments" <span class="hljs-keyword">WHERE</span> "comments"."article_id" = ?  [["article_id", <span class="hljs-number">2</span>]]
  ↳ app/models/article.rb:<span class="hljs-number">6</span>
  <span class="hljs-keyword">Comment</span> <span class="hljs-keyword">Load</span> (<span class="hljs-number">0.1</span>ms)  <span class="hljs-keyword">SELECT</span> "comments".* <span class="hljs-keyword">FROM</span> "comments" <span class="hljs-keyword">WHERE</span> "comments"."article_id" = ?  [["article_id", <span class="hljs-number">3</span>]]
  ↳ app/models/article.rb:<span class="hljs-number">6</span>
=&gt; #&lt;<span class="hljs-keyword">Comment</span> id: <span class="hljs-number">2</span>, author: "1", body: "Well, actually...", article_id: <span class="hljs-number">1</span>, created_at: "2018-10-19 00:56:10", updated_at: "2018-10-19 00:56:10"&gt;
</code></pre>
<p>Below each database statement you can see arrows pointing to the specific source filename (and line number) of the method that resulted in a database call. This can help you identify and address performance problems caused by N+1 queries: single database queries that generates multiple additional queries.</p>
<p>Verbose query logs are enabled by default in the development environment logs after Rails 5.2.</p>
<p>WARNING: We recommend against using this setting in production environments. It relies on Ruby's <code>Kernel#caller</code> method which tends to allocate a lot of memory in order to generate stacktraces of method calls.</p>
<h3><a class="anchor" aria-hidden="true" id="tagged-logging"></a><a href="#tagged-logging" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Tagged Logging</h3>
<p>When running multi-user, multi-account applications, it's often useful
to be able to filter the logs using some custom rules. <code>TaggedLogging</code>
in Active Support helps you do exactly that by stamping log lines with subdomains, request ids, and anything else to aid debugging such applications.</p>
<pre><code class="hljs css language-ruby">logger = ActiveSupport::TaggedLogging.new(Logger.new(STDOUT))
logger.tagged(<span class="hljs-string">"BCX"</span>) { logger.info <span class="hljs-string">"Stuff"</span> }                            <span class="hljs-comment"># Logs "[BCX] Stuff"</span>
logger.tagged(<span class="hljs-string">"BCX"</span>, <span class="hljs-string">"Jason"</span>) { logger.info <span class="hljs-string">"Stuff"</span> }                   <span class="hljs-comment"># Logs "[BCX] [Jason] Stuff"</span>
logger.tagged(<span class="hljs-string">"BCX"</span>) { logger.tagged(<span class="hljs-string">"Jason"</span>) { logger.info <span class="hljs-string">"Stuff"</span> } } <span class="hljs-comment"># Logs "[BCX] [Jason] Stuff"</span>
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="impact-of-logs-on-performance"></a><a href="#impact-of-logs-on-performance" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Impact of Logs on Performance</h3>
<p>Logging will always have a small impact on the performance of your Rails app,
particularly when logging to disk. Additionally, there are a few subtleties:</p>
<p>Using the <code>:debug</code> level will have a greater performance penalty than <code>:fatal</code>,
as a far greater number of strings are being evaluated and written to the
log output (e.g. disk).</p>
<p>Another potential pitfall is too many calls to <code>Logger</code> in your code:</p>
<pre><code class="hljs css language-ruby">logger.debug <span class="hljs-string">"Person attributes hash: <span class="hljs-subst">#{@person.attributes.inspect}</span>"</span>
</code></pre>
<p>In the above example, there will be a performance impact even if the allowed
output level doesn't include debug. The reason is that Ruby has to evaluate
these strings, which includes instantiating the somewhat heavy <code>String</code> object
and interpolating the variables.
Therefore, it's recommended to pass blocks to the logger methods, as these are
only evaluated if the output level is the same as — or included in — the allowed level
(i.e. lazy loading). The same code rewritten would be:</p>
<pre><code class="hljs css language-ruby">logger.debug {<span class="hljs-string">"Person attributes hash: <span class="hljs-subst">#{@person.attributes.inspect}</span>"</span>}
</code></pre>
<p>The contents of the block, and therefore the string interpolation, are only
evaluated if debug is enabled. This performance savings are only really
noticeable with large amounts of logging, but it's a good practice to employ.</p>
<h2><a class="anchor" aria-hidden="true" id="debugging-with-the-byebug-gem"></a><a href="#debugging-with-the-byebug-gem" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Debugging with the <code>byebug</code> gem</h2>
<p>When your code is behaving in unexpected ways, you can try printing to logs or
the console to diagnose the problem. Unfortunately, there are times when this
sort of error tracking is not effective in finding the root cause of a problem.
When you actually need to journey into your running source code, the debugger
is your best companion.</p>
<p>The debugger can also help you if you want to learn about the Rails source code
but don't know where to start. Just debug any request to your application and
use this guide to learn how to move from the code you have written into the
underlying Rails code.</p>
<h3><a class="anchor" aria-hidden="true" id="setup"></a><a href="#setup" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Setup</h3>
<p>You can use the <code>byebug</code> gem to set breakpoints and step through live code in
Rails. To install it, just run:</p>
<pre><code class="hljs css language-bash">$ gem install byebug
</code></pre>
<p>Inside any Rails application you can then invoke the debugger by calling the
<code>byebug</code> method.</p>
<p>Here's an example:</p>
<pre><code class="hljs css language-ruby"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">PeopleController</span> &lt; ApplicationController</span>
  <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">new</span></span>
    byebug
    @person = Person.new
  <span class="hljs-keyword">end</span>
<span class="hljs-keyword">end</span>
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="the-shell"></a><a href="#the-shell" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>The Shell</h3>
<p>As soon as your application calls the <code>byebug</code> method, the debugger will be
started in a debugger shell inside the terminal window where you launched your
application server, and you will be placed at the debugger's prompt <code>(byebug)</code>.
Before the prompt, the code around the line that is about to be run will be
displayed and the current line will be marked by '=&gt;', like this:</p>
<pre><code class="hljs">[<span class="hljs-number">1</span>, <span class="hljs-number">10</span>] <span class="hljs-keyword">in</span> /PathTo/project/app/controllers/articles_controller.rb
    <span class="hljs-number">3</span>:
    <span class="hljs-number">4</span>:   # GET /articles
    <span class="hljs-number">5</span>:   # GET /articles.json
    <span class="hljs-number">6</span>:   def index
    <span class="hljs-number">7</span>:     byebug
=&gt;  <span class="hljs-number">8</span>:     @articles = Article.find_recent
    <span class="hljs-number">9</span>:
   <span class="hljs-number">10</span>:     respond_to <span class="hljs-keyword">do</span> |format|
   <span class="hljs-number">11</span>:       format.html # index.html.erb
   <span class="hljs-number">12</span>:       format.json { render json: @articles }

(byebug)
</code></pre>
<p>If you got there by a browser request, the browser tab containing the request
will be hung until the debugger has finished and the trace has finished
processing the entire request.</p>
<p>For example:</p>
<pre><code class="hljs css language-bash">=&gt; Booting Puma
=&gt; Rails 5.1.0 application starting <span class="hljs-keyword">in</span> development on http://0.0.0.0:3000
=&gt; Run `rails server -h` <span class="hljs-keyword">for</span> more startup options
Puma starting <span class="hljs-keyword">in</span> single mode...
* Version 3.4.0 (ruby 2.3.1-p112), codename: Owl Bowl Brawl
* Min threads: 5, max threads: 5
* Environment: development
* Listening on tcp://localhost:3000
Use Ctrl-C to stop
Started GET <span class="hljs-string">"/"</span> <span class="hljs-keyword">for</span> 127.0.0.1 at 2014-04-11 13:11:48 +0200
  ActiveRecord::SchemaMigration Load (0.2ms)  SELECT <span class="hljs-string">"schema_migrations"</span>.* FROM <span class="hljs-string">"schema_migrations"</span>
Processing by ArticlesController<span class="hljs-comment">#index as HTML</span>

[3, 12] <span class="hljs-keyword">in</span> /PathTo/project/app/controllers/articles_controller.rb
    3:
    4:   <span class="hljs-comment"># GET /articles</span>
    5:   <span class="hljs-comment"># GET /articles.json</span>
    6:   def index
    7:     byebug
=&gt;  8:     @articles = Article.find_recent
    9:
   10:     respond_to <span class="hljs-keyword">do</span> |format|
   11:       format.html <span class="hljs-comment"># index.html.erb</span>
   12:       format.json { render json: @articles }
(byebug)
</code></pre>
<p>Now it's time to explore your application. A good place to start is
by asking the debugger for help. Type: <code>help</code></p>
<pre><code class="hljs">(byebug) <span class="hljs-keyword">help</span>

  break      <span class="hljs-comment">-- Sets breakpoints in the source code</span>
  catch      <span class="hljs-comment">-- Handles exception catchpoints</span>
  condition  <span class="hljs-comment">-- Sets conditions on breakpoints</span>
  continue   <span class="hljs-comment">-- Runs until program ends, hits a breakpoint or reaches a line</span>
  debug      <span class="hljs-comment">-- Spawns a subdebugger</span>
  <span class="hljs-keyword">delete</span>     <span class="hljs-comment">-- Deletes breakpoints</span>
  <span class="hljs-keyword">disable</span>    <span class="hljs-comment">-- Disables breakpoints or displays</span>
  display    <span class="hljs-comment">-- Evaluates expressions every time the debugger stops</span>
  down       <span class="hljs-comment">-- Moves to a lower frame in the stack trace</span>
  edit       <span class="hljs-comment">-- Edits source files</span>
  <span class="hljs-keyword">enable</span>     <span class="hljs-comment">-- Enables breakpoints or displays</span>
  <span class="hljs-keyword">finish</span>     <span class="hljs-comment">-- Runs the program until frame returns</span>
  frame      <span class="hljs-comment">-- Moves to a frame in the call stack</span>
  <span class="hljs-keyword">help</span>       <span class="hljs-comment">-- Helps you using byebug</span>
  history    <span class="hljs-comment">-- Shows byebug's history of commands</span>
  info       <span class="hljs-comment">-- Shows several informations about the program being debugged</span>
  interrupt  <span class="hljs-comment">-- Interrupts the program</span>
  irb        <span class="hljs-comment">-- Starts an IRB session</span>
  <span class="hljs-keyword">kill</span>       <span class="hljs-comment">-- Sends a signal to the current process</span>
  <span class="hljs-keyword">list</span>       <span class="hljs-comment">-- Lists lines of source code</span>
  method     <span class="hljs-comment">-- Shows methods of an object, class or module</span>
  <span class="hljs-keyword">next</span>       <span class="hljs-comment">-- Runs one or more lines of code</span>
  pry        <span class="hljs-comment">-- Starts a Pry session</span>
  quit       <span class="hljs-comment">-- Exits byebug</span>
  restart    <span class="hljs-comment">-- Restarts the debugged program</span>
  <span class="hljs-keyword">save</span>       <span class="hljs-comment">-- Saves current byebug session to a file</span>
  <span class="hljs-keyword">set</span>        <span class="hljs-comment">-- Modifies byebug settings</span>
  <span class="hljs-keyword">show</span>       <span class="hljs-comment">-- Shows byebug settings</span>
  <span class="hljs-keyword">source</span>     <span class="hljs-comment">-- Restores a previously saved byebug session</span>
  step       <span class="hljs-comment">-- Steps into blocks or methods one or more times</span>
  <span class="hljs-keyword">thread</span>     <span class="hljs-comment">-- Commands to manipulate threads</span>
  tracevar   <span class="hljs-comment">-- Enables tracing of a global variable</span>
  undisplay  <span class="hljs-comment">-- Stops displaying all or some expressions when program stops</span>
  untracevar <span class="hljs-comment">-- Stops tracing a global variable</span>
  up         <span class="hljs-comment">-- Moves to a higher frame in the stack trace</span>
  <span class="hljs-keyword">var</span>        <span class="hljs-comment">-- Shows variables and its values</span>
  <span class="hljs-keyword">where</span>      <span class="hljs-comment">-- Displays the backtrace</span>

(byebug)
</code></pre>
<p>To see the previous ten lines you should type <code>list-</code> (or <code>l-</code>).</p>
<pre><code class="hljs">(byebug) l-

[<span class="hljs-number">1</span>, <span class="hljs-number">10</span>] <span class="hljs-keyword">in</span> /PathTo/project/app/controllers/articles_controller.rb
   <span class="hljs-number">1</span>  <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ArticlesController</span> &lt; ApplicationController</span>
   <span class="hljs-number">2</span>    before_action <span class="hljs-symbol">:set_article</span>, <span class="hljs-symbol">only:</span> [<span class="hljs-symbol">:show</span>, <span class="hljs-symbol">:edit</span>, <span class="hljs-symbol">:update</span>, <span class="hljs-symbol">:destroy</span>]
   <span class="hljs-number">3</span>
   <span class="hljs-number">4</span>    <span class="hljs-comment"># GET /articles</span>
   <span class="hljs-number">5</span>    <span class="hljs-comment"># GET /articles.json</span>
   <span class="hljs-number">6</span>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">index</span></span>
   <span class="hljs-number">7</span>      byebug
   <span class="hljs-number">8</span>      @articles = Article.find_recent
   <span class="hljs-number">9</span>
   <span class="hljs-number">10</span>     respond_to <span class="hljs-keyword">do</span> <span class="hljs-params">|format|</span>
</code></pre>
<p>This way you can move inside the file and see the code above the line where you
added the <code>byebug</code> call. Finally, to see where you are in the code again you can
type <code>list=</code></p>
<pre><code class="hljs">(byebug) list=

[<span class="hljs-number">3</span>, <span class="hljs-number">12</span>] <span class="hljs-keyword">in</span> /PathTo/project/app/controllers/articles_controller.rb
    <span class="hljs-number">3</span>:
    <span class="hljs-number">4</span>:   # GET /articles
    <span class="hljs-number">5</span>:   # GET /articles.json
    <span class="hljs-number">6</span>:   def index
    <span class="hljs-number">7</span>:     byebug
=&gt;  <span class="hljs-number">8</span>:     @articles = Article.find_recent
    <span class="hljs-number">9</span>:
   <span class="hljs-number">10</span>:     respond_to <span class="hljs-keyword">do</span> |format|
   <span class="hljs-number">11</span>:       format.html # index.html.erb
   <span class="hljs-number">12</span>:       format.json { render json: @articles }
(byebug)
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="the-context"></a><a href="#the-context" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>The Context</h3>
<p>When you start debugging your application, you will be placed in different
contexts as you go through the different parts of the stack.</p>
<p>The debugger creates a context when a stopping point or an event is reached. The
context has information about the suspended program which enables the debugger
to inspect the frame stack, evaluate variables from the perspective of the
debugged program, and know the place where the debugged program is stopped.</p>
<p>At any time you can call the <code>backtrace</code> command (or its alias <code>where</code>) to print
the backtrace of the application. This can be very helpful to know how you got
where you are. If you ever wondered about how you got somewhere in your code,
then <code>backtrace</code> will supply the answer.</p>
<pre><code class="hljs">(byebug) where
--&gt; <span class="hljs-comment">#0  ArticlesController.index</span>
      at /PathToProject/app/controllers/articles_controller.<span class="hljs-symbol">rb:</span><span class="hljs-number">8</span>
    <span class="hljs-comment">#1  ActionController::BasicImplicitRender.send_action(method#String, *args#Array)</span>
      at /PathToGems/actionpack-<span class="hljs-number">5.1</span>.<span class="hljs-number">0</span>/<span class="hljs-class"><span class="hljs-keyword">lib</span>/<span class="hljs-title">action_controller</span>/<span class="hljs-title">metal</span>/<span class="hljs-title">basic_implicit_render</span>.<span class="hljs-title">rb</span>:4</span>
    <span class="hljs-comment">#2  AbstractController::Base.process_action(action#NilClass, *args#Array)</span>
      at /PathToGems/actionpack-<span class="hljs-number">5.1</span>.<span class="hljs-number">0</span>/<span class="hljs-class"><span class="hljs-keyword">lib</span>/<span class="hljs-title">abstract_controller</span>/<span class="hljs-title">base</span>.<span class="hljs-title">rb</span>:181</span>
    <span class="hljs-comment">#3  ActionController::Rendering.process_action(action, *args)</span>
      at /PathToGems/actionpack-<span class="hljs-number">5.1</span>.<span class="hljs-number">0</span>/<span class="hljs-class"><span class="hljs-keyword">lib</span>/<span class="hljs-title">action_controller</span>/<span class="hljs-title">metal</span>/<span class="hljs-title">rendering</span>.<span class="hljs-title">rb</span>:30</span>
...
</code></pre>
<p>The current frame is marked with <code>--&gt;</code>. You can move anywhere you want in this
trace (thus changing the context) by using the <code>frame n</code> command, where <em>n</em> is
the specified frame number. If you do that, <code>byebug</code> will display your new
context.</p>
<pre><code class="hljs">(byebug) frame <span class="hljs-number">2</span>

[<span class="hljs-number">176</span>, <span class="hljs-number">185</span>] in /PathToGems/actionpack-<span class="hljs-number">5.1</span>.<span class="hljs-number">0</span>/<span class="hljs-class"><span class="hljs-keyword">lib</span>/<span class="hljs-title">abstract_controller</span>/<span class="hljs-title">base</span>.<span class="hljs-title">rb</span></span>
   <span class="hljs-number">176</span>:       <span class="hljs-comment"># is the intended way to override action dispatching.</span>
   <span class="hljs-number">177</span>:       <span class="hljs-comment">#</span>
   <span class="hljs-number">178</span>:       <span class="hljs-comment"># Notice that the first argument is the method to be dispatched</span>
   <span class="hljs-number">179</span>:       <span class="hljs-comment"># which is *not* necessarily the same as the action name.</span>
   <span class="hljs-number">180</span>:       <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">process_action</span></span>(method_name, *args)
=&gt; <span class="hljs-number">181</span>:         send_action(method_name, *args)
   <span class="hljs-number">182</span>:       <span class="hljs-keyword">end</span>
   <span class="hljs-number">183</span>:
   <span class="hljs-number">184</span>:       <span class="hljs-comment"># Actually call the method associated with the action. Override</span>
   <span class="hljs-number">185</span>:       <span class="hljs-comment"># this method if you wish to change how action methods are called,</span>
(byebug)
</code></pre>
<p>The available variables are the same as if you were running the code line by
line. After all, that's what debugging is.</p>
<p>You can also use <code>up [n]</code> and <code>down [n]</code> commands in order to change the context
<em>n</em> frames up or down the stack respectively. <em>n</em> defaults to one. Up in this
case is towards higher-numbered stack frames, and down is towards lower-numbered
stack frames.</p>
<h3><a class="anchor" aria-hidden="true" id="threads"></a><a href="#threads" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Threads</h3>
<p>The debugger can list, stop, resume, and switch between running threads by using
the <code>thread</code> command (or the abbreviated <code>th</code>). This command has a handful of
options:</p>
<ul>
<li><code>thread</code>: shows the current thread.</li>
<li><code>thread list</code>: is used to list all threads and their statuses. The current
thread is marked with a plus (+) sign.</li>
<li><code>thread stop n</code>: stops thread <em>n</em>.</li>
<li><code>thread resume n</code>: resumes thread <em>n</em>.</li>
<li><code>thread switch n</code>: switches the current thread context to <em>n</em>.</li>
</ul>
<p>This command is very helpful when you are debugging concurrent threads and need
to verify that there are no race conditions in your code.</p>
<h3><a class="anchor" aria-hidden="true" id="inspecting-variables"></a><a href="#inspecting-variables" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Inspecting Variables</h3>
<p>Any expression can be evaluated in the current context. To evaluate an
expression, just type it!</p>
<p>This example shows how you can print the instance variables defined within the
current context:</p>
<pre><code class="hljs">[<span class="hljs-number">3</span>, <span class="hljs-number">12</span>] <span class="hljs-keyword">in</span> /PathTo/project/app/controllers/articles_controller.rb
    <span class="hljs-number">3</span>:
    <span class="hljs-number">4</span>:   <span class="hljs-comment"># GET /articles</span>
    <span class="hljs-number">5</span>:   <span class="hljs-comment"># GET /articles.json</span>
    <span class="hljs-number">6</span>:   <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">index</span></span>
    <span class="hljs-number">7</span>:     byebug
=&gt;  <span class="hljs-number">8</span>:     @articles = Article.find_recent
    <span class="hljs-number">9</span>:
   <span class="hljs-number">10</span>:     respond_to <span class="hljs-keyword">do</span> <span class="hljs-params">|format|</span>
   <span class="hljs-number">11</span>:       format.html <span class="hljs-comment"># index.html.erb</span>
   <span class="hljs-number">12</span>:       format.json { render <span class="hljs-symbol">json:</span> @articles }

(byebug) instance_variables
[<span class="hljs-symbol">:</span>@_action_has_layout, <span class="hljs-symbol">:</span>@_routes, <span class="hljs-symbol">:</span>@_request, <span class="hljs-symbol">:</span>@_response, <span class="hljs-symbol">:</span>@_lookup_context,
 <span class="hljs-symbol">:</span>@_action_name, <span class="hljs-symbol">:</span>@_response_body, <span class="hljs-symbol">:</span>@marked_for_same_origin_verification,
 <span class="hljs-symbol">:</span>@_config]
</code></pre>
<p>As you may have figured out, all of the variables that you can access from a
controller are displayed. This list is dynamically updated as you execute code.
For example, run the next line using <code>next</code> (you'll learn more about this
command later in this guide).</p>
<pre><code class="hljs">(byebug) next

[<span class="hljs-number">5</span>, <span class="hljs-number">14</span>] <span class="hljs-keyword">in</span> /PathTo/project/app/controllers/articles_controller.rb
   <span class="hljs-number">5</span>     # GET /articles.json
   <span class="hljs-number">6</span>     def index
   <span class="hljs-number">7</span>       byebug
   <span class="hljs-number">8</span>       @articles = Article.find_recent
   <span class="hljs-number">9</span>
=&gt; <span class="hljs-number">10</span>      respond_to <span class="hljs-keyword">do</span> |format|
   <span class="hljs-number">11</span>        format.html # index.html.erb
   <span class="hljs-number">12</span>        format.json { render json: @articles }
   <span class="hljs-number">13</span>      end
   <span class="hljs-number">14</span>    end
   <span class="hljs-number">15</span>
(byebug)
</code></pre>
<p>And then ask again for the instance_variables:</p>
<pre><code class="hljs">(byebug) instance_variables
[:<span class="hljs-symbol">@_action_has_layout</span>, :<span class="hljs-symbol">@_routes</span>, :<span class="hljs-symbol">@_request</span>, :<span class="hljs-symbol">@_response</span>, :<span class="hljs-symbol">@_lookup_context</span>,
 :<span class="hljs-symbol">@_action_name</span>, :<span class="hljs-symbol">@_response_body</span>, :<span class="hljs-symbol">@marked_for_same_origin_verification</span>,
 :<span class="hljs-symbol">@_config</span>, :<span class="hljs-symbol">@articles]</span>
</code></pre>
<p>Now <code>@articles</code> is included in the instance variables, because the line defining
it was executed.</p>
<p>TIP: You can also step into <strong>irb</strong> mode with the command <code>irb</code> (of course!).
This will start an irb session within the context you invoked it.</p>
<p>The <code>var</code> method is the most convenient way to show variables and their values.
Let's have <code>byebug</code> help us with it.</p>
<pre><code class="hljs">(byebug) help var

  [v]ar &lt;subcommand&gt;

  Shows variables <span class="hljs-keyword">and</span> its values


  var all      -- Shows local, global <span class="hljs-keyword">and</span><span class="hljs-built_in"> instance </span>variables of self.
  var args     -- Information about arguments of the current scope
  var const    -- Shows constants of an object.
  var global   -- Shows global variables.
  var<span class="hljs-built_in"> instance </span>-- Shows<span class="hljs-built_in"> instance </span>variables of self <span class="hljs-keyword">or</span> a specific object.
  var local    -- Shows local variables <span class="hljs-keyword">in</span> current scope.

</code></pre>
<p>This is a great way to inspect the values of the current context variables. For
example, to check that we have no local variables currently defined:</p>
<pre><code class="hljs">(<span class="hljs-name">byebug</span>) var local
(<span class="hljs-name">byebug</span>)
</code></pre>
<p>You can also inspect for an object method this way:</p>
<pre><code class="hljs">(byebug) <span class="hljs-keyword">var</span> instance Article.<span class="hljs-keyword">new</span>
@_start_transaction_state = {}
<span class="hljs-meta">@aggregation</span>_cache = {}
<span class="hljs-meta">@association</span>_cache = {}
<span class="hljs-meta">@attributes</span> = #&lt;ActiveRecord::AttributeSet:<span class="hljs-number">0x007fd0682a9b18</span> <span class="hljs-meta">@attributes</span>={<span class="hljs-string">"id"</span>=&gt;#&lt;ActiveRecord::Attribute::FromDatabase:<span class="hljs-number">0x007fd0682a9a00</span> <span class="hljs-meta">@name</span>=<span class="hljs-string">"id"</span>, <span class="hljs-meta">@value</span>_be...
<span class="hljs-meta">@destroyed</span> = <span class="hljs-keyword">false</span>
<span class="hljs-meta">@destroyed</span>_by_association = nil
<span class="hljs-meta">@marked</span>_for_destruction = <span class="hljs-keyword">false</span>
<span class="hljs-meta">@new</span>_record = <span class="hljs-keyword">true</span>
<span class="hljs-meta">@readonly</span> = <span class="hljs-keyword">false</span>
<span class="hljs-meta">@transaction</span>_state = nil
</code></pre>
<p>You can also use <code>display</code> to start watching variables. This is a good way of
tracking the values of a variable while the execution goes on.</p>
<pre><code class="hljs">(byebug) display <span class="hljs-variable">@articles</span>
<span class="hljs-number">1</span>: <span class="hljs-variable">@articles</span> = <span class="hljs-keyword">nil</span>
</code></pre>
<p>The variables inside the displayed list will be printed with their values after
you move in the stack. To stop displaying a variable use <code>undisplay n</code> where
<em>n</em> is the variable number (1 in the last example).</p>
<h3><a class="anchor" aria-hidden="true" id="step-by-step"></a><a href="#step-by-step" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Step by Step</h3>
<p>Now you should know where you are in the running trace and be able to print the
available variables. But let's continue and move on with the application
execution.</p>
<p>Use <code>step</code> (abbreviated <code>s</code>) to continue running your program until the next
logical stopping point and return control to the debugger. <code>next</code> is similar to
<code>step</code>, but while <code>step</code> stops at the next line of code executed, doing just a
single step, <code>next</code> moves to the next line without descending inside methods.</p>
<p>For example, consider the following situation:</p>
<pre><code class="hljs">Started GET <span class="hljs-string">"/"</span> <span class="hljs-keyword">for</span> <span class="hljs-number">127.0</span>.<span class="hljs-number">0</span>.<span class="hljs-number">1</span> at <span class="hljs-number">2014</span>-<span class="hljs-number">04</span>-<span class="hljs-number">11</span> <span class="hljs-number">13</span><span class="hljs-symbol">:</span><span class="hljs-number">39</span><span class="hljs-symbol">:</span><span class="hljs-number">23</span> +<span class="hljs-number">0200</span>
Processing by ArticlesController<span class="hljs-comment">#index as HTML</span>

[<span class="hljs-number">1</span>, <span class="hljs-number">6</span>] <span class="hljs-keyword">in</span> /PathToProject/app/models/article.rb
   <span class="hljs-number">1</span>: <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Article</span> &lt; ApplicationRecord</span>
   <span class="hljs-number">2</span>:   <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">self</span>.<span class="hljs-title">find_recent</span><span class="hljs-params">(limit = <span class="hljs-number">10</span>)</span></span>
   <span class="hljs-number">3</span>:     byebug
=&gt; <span class="hljs-number">4</span>:     where(<span class="hljs-string">'created_at &gt; ?'</span>, <span class="hljs-number">1</span>.week.ago).limit(limit)
   <span class="hljs-number">5</span>:   <span class="hljs-keyword">end</span>
   <span class="hljs-number">6</span>: <span class="hljs-keyword">end</span>

(byebug)
</code></pre>
<p>If we use <code>next</code>, we won't go deep inside method calls. Instead, <code>byebug</code> will
go to the next line within the same context. In this case, it is the last line
of the current method, so <code>byebug</code> will return to the next line of the caller
method.</p>
<pre><code class="hljs">(byebug) <span class="hljs-keyword">next</span>
[<span class="hljs-number">4</span>, <span class="hljs-number">13</span>] <span class="hljs-keyword">in</span> /PathToProject/app/controllers/articles_controller.rb
    <span class="hljs-number">4</span>:   <span class="hljs-comment"># GET /articles</span>
    <span class="hljs-number">5</span>:   <span class="hljs-comment"># GET /articles.json</span>
    <span class="hljs-number">6</span>:   <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">index</span></span>
    <span class="hljs-number">7</span>:     @articles = Article.find_recent
    <span class="hljs-number">8</span>:
=&gt;  <span class="hljs-number">9</span>:     respond_to do <span class="hljs-params">|format|</span>
   <span class="hljs-number">10</span>:       format.html <span class="hljs-comment"># index.html.erb</span>
   <span class="hljs-number">11</span>:       format.json { render <span class="hljs-symbol">json:</span> @articles }
   <span class="hljs-number">12</span>:     <span class="hljs-keyword">end</span>
   <span class="hljs-number">13</span>:   <span class="hljs-keyword">end</span>

(byebug)
</code></pre>
<p>If we use <code>step</code> in the same situation, <code>byebug</code> will literally go to the next
Ruby instruction to be executed -- in this case, Active Support's <code>week</code> method.</p>
<pre><code class="hljs">(byebug) step

[<span class="hljs-number">49</span>, <span class="hljs-number">58</span>] in /PathToGems/activesupport-<span class="hljs-number">5.1</span>.<span class="hljs-number">0</span>/<span class="hljs-class"><span class="hljs-keyword">lib</span>/<span class="hljs-title">active_support</span>/<span class="hljs-title">core_ext</span>/<span class="hljs-title">numeric</span>/<span class="hljs-title">time</span>.<span class="hljs-title">rb</span></span>
   <span class="hljs-number">49</span>:
   <span class="hljs-number">50</span>:   <span class="hljs-comment"># Returns a Duration instance matching the number of weeks provided.</span>
   <span class="hljs-number">51</span>:   <span class="hljs-comment">#</span>
   <span class="hljs-number">52</span>:   <span class="hljs-comment">#   2.weeks # =&gt; 14 days</span>
   <span class="hljs-number">53</span>:   <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">weeks</span></span>
=&gt; <span class="hljs-number">54</span>:     <span class="hljs-symbol">ActiveSupport:</span>:Duration.weeks(<span class="hljs-keyword">self</span>)
   <span class="hljs-number">55</span>:   <span class="hljs-keyword">end</span>
   <span class="hljs-number">56</span>:   <span class="hljs-keyword">alias</span> :week :weeks
   <span class="hljs-number">57</span>:
   <span class="hljs-number">58</span>:   <span class="hljs-comment"># Returns a Duration instance matching the number of fortnights provided.</span>
(byebug)
</code></pre>
<p>This is one of the best ways to find bugs in your code.</p>
<p>TIP: You can also use <code>step n</code> or <code>next n</code> to move forward <code>n</code> steps at once.</p>
<h3><a class="anchor" aria-hidden="true" id="breakpoints"></a><a href="#breakpoints" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Breakpoints</h3>
<p>A breakpoint makes your application stop whenever a certain point in the program
is reached. The debugger shell is invoked in that line.</p>
<p>You can add breakpoints dynamically with the command <code>break</code> (or just <code>b</code>).
There are 3 possible ways of adding breakpoints manually:</p>
<ul>
<li><code>break n</code>: set breakpoint in line number <em>n</em> in the current source file.</li>
<li><code>break file:n [if expression]</code>: set breakpoint in line number <em>n</em> inside
file named <em>file</em>. If an <em>expression</em> is given it must evaluated to <em>true</em> to
fire up the debugger.</li>
<li><code>break class(.|\#)method [if expression]</code>: set breakpoint in <em>method</em> (. and
# for class and instance method respectively) defined in <em>class</em>. The
<em>expression</em> works the same way as with file:n.</li>
</ul>
<p>For example, in the previous situation</p>
<pre><code class="hljs">[<span class="hljs-number">4</span>, <span class="hljs-number">13</span>] <span class="hljs-keyword">in</span> /PathToProject/app/controllers/articles_controller.rb
    <span class="hljs-number">4</span>:   # GET /articles
    <span class="hljs-number">5</span>:   # GET /articles.json
    <span class="hljs-number">6</span>:   def index
    <span class="hljs-number">7</span>:     @articles = Article.find_recent
    <span class="hljs-number">8</span>:
=&gt;  <span class="hljs-number">9</span>:     respond_to <span class="hljs-keyword">do</span> |format|
   <span class="hljs-number">10</span>:       format.html # index.html.erb
   <span class="hljs-number">11</span>:       format.json { render json: @articles }
   <span class="hljs-number">12</span>:     end
   <span class="hljs-number">13</span>:   end

(byebug) <span class="hljs-keyword">break</span> <span class="hljs-number">11</span>
Successfully created breakpoint with id <span class="hljs-number">1</span>

</code></pre>
<p>Use <code>info breakpoints</code> to list breakpoints. If you supply a number, it lists
that breakpoint. Otherwise it lists all breakpoints.</p>
<pre><code class="hljs">(<span class="hljs-keyword">byebug) </span><span class="hljs-meta">info</span> <span class="hljs-keyword">breakpoints
</span><span class="hljs-symbol">Num</span> Enb What
<span class="hljs-number">1</span>   y   at /PathToProject/app/controllers/articles_controller.rb:<span class="hljs-number">11</span>
</code></pre>
<p>To delete breakpoints: use the command <code>delete n</code> to remove the breakpoint
number <em>n</em>. If no number is specified, it deletes all breakpoints that are
currently active.</p>
<pre><code class="hljs">(<span class="hljs-keyword">byebug) </span>delete <span class="hljs-number">1</span>
(<span class="hljs-keyword">byebug) </span><span class="hljs-meta">info</span> <span class="hljs-keyword">breakpoints
</span><span class="hljs-symbol">No</span> <span class="hljs-keyword">breakpoints.
</span></code></pre>
<p>You can also enable or disable breakpoints:</p>
<ul>
<li><code>enable breakpoints [n [m [...]]]</code>: allows a specific breakpoint list or all
breakpoints to stop your program. This is the default state when you create a
breakpoint.</li>
<li><code>disable breakpoints [n [m [...]]]</code>: make certain (or all) breakpoints have
no effect on your program.</li>
</ul>
<h3><a class="anchor" aria-hidden="true" id="catching-exceptions"></a><a href="#catching-exceptions" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Catching Exceptions</h3>
<p>The command <code>catch exception-name</code> (or just <code>cat exception-name</code>) can be used to
intercept an exception of type <em>exception-name</em> when there would otherwise be no
handler for it.</p>
<p>To list all active catchpoints use <code>catch</code>.</p>
<h3><a class="anchor" aria-hidden="true" id="resuming-execution"></a><a href="#resuming-execution" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Resuming Execution</h3>
<p>There are two ways to resume execution of an application that is stopped in the
debugger:</p>
<ul>
<li><code>continue [n]</code>: resumes program execution at the address where your script last
stopped; any breakpoints set at that address are bypassed. The optional argument
<code>n</code> allows you to specify a line number to set a one-time breakpoint which is
deleted when that breakpoint is reached.</li>
<li><code>finish [n]</code>: execute until the selected stack frame returns. If no frame
number is given, the application will run until the currently selected frame
returns. The currently selected frame starts out the most-recent frame or 0 if
no frame positioning (e.g up, down, or frame) has been performed. If a frame
number is given it will run until the specified frame returns.</li>
</ul>
<h3><a class="anchor" aria-hidden="true" id="editing"></a><a href="#editing" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Editing</h3>
<p>Two commands allow you to open code from the debugger into an editor:</p>
<ul>
<li><code>edit [file:n]</code>: edit file named <em>file</em> using the editor specified by the
EDITOR environment variable. A specific line <em>n</em> can also be given.</li>
</ul>
<h3><a class="anchor" aria-hidden="true" id="quitting"></a><a href="#quitting" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Quitting</h3>
<p>To exit the debugger, use the <code>quit</code> command (abbreviated to <code>q</code>). Or, type <code>q!</code>
to bypass the <code>Really quit? (y/n)</code> prompt and exit unconditionally.</p>
<p>A simple quit tries to terminate all threads in effect. Therefore your server
will be stopped and you will have to start it again.</p>
<h3><a class="anchor" aria-hidden="true" id="settings"></a><a href="#settings" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Settings</h3>
<p><code>byebug</code> has a few available options to tweak its behavior:</p>
<pre><code class="hljs">(byebug) help <span class="hljs-keyword">set</span>

  <span class="hljs-keyword">set</span> &lt;setting&gt; &lt;value&gt;

  Modifies byebug settings

  <span class="hljs-built_in">Boolean</span> values <span class="hljs-keyword">take</span> <span class="hljs-string">"on"</span>, <span class="hljs-string">"off"</span>, <span class="hljs-string">"true"</span>, <span class="hljs-string">"false"</span>, <span class="hljs-string">"1"</span> <span class="hljs-keyword">or</span> <span class="hljs-string">"0"</span>. <span class="hljs-keyword">If</span> you
  don<span class="hljs-comment">'t specify a value, the boolean setting will be enabled. Conversely,</span>
  you can use <span class="hljs-string">"set no&lt;setting&gt;"</span> <span class="hljs-keyword">to</span> disable them.

  You can see these environment settings <span class="hljs-keyword">with</span> the <span class="hljs-string">"show"</span> command.

  List <span class="hljs-keyword">of</span> supported settings:

  autosave       -- Automatically save command history record <span class="hljs-keyword">on</span> <span class="hljs-keyword">exit</span>
  autolist       -- Invoke list command <span class="hljs-keyword">on</span> every <span class="hljs-keyword">stop</span>
  width          -- Number <span class="hljs-keyword">of</span> characters per line <span class="hljs-keyword">in</span> byebug<span class="hljs-comment">'s output</span>
  autoirb        -- Invoke IRB <span class="hljs-keyword">on</span> every <span class="hljs-keyword">stop</span>
  basename       -- &lt;file&gt;:&lt;line&gt; information after every <span class="hljs-keyword">stop</span> uses <span class="hljs-built_in">short</span> paths
  linetrace      -- Enable line execution tracing
  autopry        -- Invoke Pry <span class="hljs-keyword">on</span> every <span class="hljs-keyword">stop</span>
  stack_on_error -- Display stack trace <span class="hljs-keyword">when</span> `eval` raises an exception
  fullpath       -- Display full file names <span class="hljs-keyword">in</span> backtraces
  histfile       -- File <span class="hljs-keyword">where</span> cmd history <span class="hljs-keyword">is</span> saved <span class="hljs-keyword">to</span>. <span class="hljs-keyword">Default</span>: ./.byebug_history
  listsize       -- <span class="hljs-keyword">Set</span> number <span class="hljs-keyword">of</span> source lines <span class="hljs-keyword">to</span> list <span class="hljs-keyword">by</span> <span class="hljs-keyword">default</span>
  post_mortem    -- Enable/disable post-mortem mode
  callstyle      -- <span class="hljs-keyword">Set</span> how you want method <span class="hljs-keyword">call</span> parameters <span class="hljs-keyword">to</span> be displayed
  histsize       -- Maximum number <span class="hljs-keyword">of</span> commands that can be stored <span class="hljs-keyword">in</span> byebug history
  savefile       -- File <span class="hljs-keyword">where</span> settings are saved <span class="hljs-keyword">to</span>. <span class="hljs-keyword">Default</span>: ~/.byebug_save
</code></pre>
<p>TIP: You can save these settings in an <code>.byebugrc</code> file in your home directory.
The debugger reads these global settings when it starts. For example:</p>
<pre><code class="hljs css language-bash"><span class="hljs-built_in">set</span> callstyle short
<span class="hljs-built_in">set</span> listsize 25
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="debugging-with-the-web-console-gem"></a><a href="#debugging-with-the-web-console-gem" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Debugging with the <code>web-console</code> gem</h2>
<p>Web Console is a bit like <code>byebug</code>, but it runs in the browser. In any page you
are developing, you can request a console in the context of a view or a
controller. The console would be rendered next to your HTML content.</p>
<h3><a class="anchor" aria-hidden="true" id="console"></a><a href="#console" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Console</h3>
<p>Inside any controller action or view, you can invoke the console by
calling the <code>console</code> method.</p>
<p>For example, in a controller:</p>
<pre><code class="hljs css language-ruby"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">PostsController</span> &lt; ApplicationController</span>
  <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">new</span></span>
    console
    @post = Post.new
  <span class="hljs-keyword">end</span>
<span class="hljs-keyword">end</span>
</code></pre>
<p>Or in a view:</p>
<pre><code class="hljs css language-html+erb"><span class="hljs-tag">&lt;<span class="hljs-name">%</span> <span class="hljs-attr">console</span> %&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>New Post<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>
</code></pre>
<p>This will render a console inside your view. You don't need to care about the
location of the <code>console</code> call; it won't be rendered on the spot of its
invocation but next to your HTML content.</p>
<p>The console executes pure Ruby code: You can define and instantiate
custom classes, create new models, and inspect variables.</p>
<p>NOTE: Only one console can be rendered per request. Otherwise <code>web-console</code>
will raise an error on the second <code>console</code> invocation.</p>
<h3><a class="anchor" aria-hidden="true" id="inspecting-variables-1"></a><a href="#inspecting-variables-1" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Inspecting Variables</h3>
<p>You can invoke <code>instance_variables</code> to list all the instance variables
available in your context. If you want to list all the local variables, you can
do that with <code>local_variables</code>.</p>
<h3><a class="anchor" aria-hidden="true" id="settings-1"></a><a href="#settings-1" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Settings</h3>
<ul>
<li><code>config.web_console.whitelisted_ips</code>: Authorized list of IPv4 or IPv6
addresses and networks (defaults: <code>127.0.0.1/8, ::1</code>).</li>
<li><code>config.web_console.whiny_requests</code>: Log a message when a console rendering
is prevented (defaults: <code>true</code>).</li>
</ul>
<p>Since <code>web-console</code> evaluates plain Ruby code remotely on the server, don't try
to use it in production.</p>
<h2><a class="anchor" aria-hidden="true" id="debugging-memory-leaks"></a><a href="#debugging-memory-leaks" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Debugging Memory Leaks</h2>
<p>A Ruby application (on Rails or not), can leak memory — either in the Ruby code
or at the C code level.</p>
<p>In this section, you will learn how to find and fix such leaks by using tool
such as Valgrind.</p>
<h3><a class="anchor" aria-hidden="true" id="valgrind"></a><a href="#valgrind" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Valgrind</h3>
<p><a href="http://valgrind.org/">Valgrind</a> is an application for detecting C-based memory
leaks and race conditions.</p>
<p>There are Valgrind tools that can automatically detect many memory management
and threading bugs, and profile your programs in detail. For example, if a C
extension in the interpreter calls <code>malloc()</code> but doesn't properly call
<code>free()</code>, this memory won't be available until the app terminates.</p>
<p>For further information on how to install Valgrind and use with Ruby, refer to
<a href="http://blog.evanweaver.com/articles/2008/02/05/valgrind-and-ruby/">Valgrind and Ruby</a>
by Evan Weaver.</p>
<h2><a class="anchor" aria-hidden="true" id="plugins-for-debugging"></a><a href="#plugins-for-debugging" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Plugins for Debugging</h2>
<p>There are some Rails plugins to help you to find errors and debug your
application. Here is a list of useful plugins for debugging:</p>
<ul>
<li><a href="https://github.com/ruckus/active-record-query-trace/tree/master">Query Trace</a> Adds query
origin tracing to your logs.</li>
<li><a href="https://github.com/smartinez87/exception_notification/tree/master">Exception Notifier</a>
Provides a mailer object and a default set of templates for sending email
notifications when errors occur in a Rails application.</li>
<li><a href="https://github.com/charliesome/better_errors">Better Errors</a> Replaces the
standard Rails error page with a new one containing more contextual information,
like source code and variable inspection.</li>
<li><a href="https://github.com/dejan/rails_panel">RailsPanel</a> Chrome extension for Rails
development that will end your tailing of development.log. Have all information
about your Rails app requests in the browser — in the Developer Tools panel.
Provides insight to db/rendering/total times, parameter list, rendered views and
more.</li>
<li><a href="https://github.com/pry/pry">Pry</a> An IRB alternative and runtime developer console.</li>
</ul>
<h2><a class="anchor" aria-hidden="true" id="references"></a><a href="#references" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>References</h2>
<ul>
<li><a href="https://github.com/deivid-rodriguez/byebug">byebug Homepage</a></li>
<li><a href="https://github.com/rails/web-console">web-console Homepage</a></li>
</ul>
</span></div></article></div><div class="docLastUpdate"><em>Last updated on 2019-7-7</em></div><div class="docs-prevnext"><a class="docs-prev button" href="/rails-setup/docs/rails/securing-rails"><span class="arrow-prev">← </span><span>Securing Rails Applications</span></a><a class="docs-next button" href="/rails-setup/docs/rails/configuring-rails"><span>Configuring Rails Applications</span><span class="arrow-next"> →</span></a></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#view-helpers-for-debugging">View Helpers for Debugging</a><ul class="toc-headings"><li><a href="#debug"><code>debug</code></a></li><li><a href="#to_yaml"><code>to_yaml</code></a></li><li><a href="#inspect"><code>inspect</code></a></li></ul></li><li><a href="#the-logger">The Logger</a><ul class="toc-headings"><li><a href="#what-is-the-logger">What is the Logger?</a></li><li><a href="#log-levels">Log Levels</a></li><li><a href="#sending-messages">Sending Messages</a></li><li><a href="#verbose-query-logs">Verbose Query Logs</a></li><li><a href="#tagged-logging">Tagged Logging</a></li><li><a href="#impact-of-logs-on-performance">Impact of Logs on Performance</a></li></ul></li><li><a href="#debugging-with-the-byebug-gem">Debugging with the <code>byebug</code> gem</a><ul class="toc-headings"><li><a href="#setup">Setup</a></li><li><a href="#the-shell">The Shell</a></li><li><a href="#the-context">The Context</a></li><li><a href="#threads">Threads</a></li><li><a href="#inspecting-variables">Inspecting Variables</a></li><li><a href="#step-by-step">Step by Step</a></li><li><a href="#breakpoints">Breakpoints</a></li><li><a href="#catching-exceptions">Catching Exceptions</a></li><li><a href="#resuming-execution">Resuming Execution</a></li><li><a href="#editing">Editing</a></li><li><a href="#quitting">Quitting</a></li><li><a href="#settings">Settings</a></li></ul></li><li><a href="#debugging-with-the-web-console-gem">Debugging with the <code>web-console</code> gem</a><ul class="toc-headings"><li><a href="#console">Console</a></li><li><a href="#inspecting-variables-1">Inspecting Variables</a></li><li><a href="#settings-1">Settings</a></li></ul></li><li><a href="#debugging-memory-leaks">Debugging Memory Leaks</a><ul class="toc-headings"><li><a href="#valgrind">Valgrind</a></li></ul></li><li><a href="#plugins-for-debugging">Plugins for Debugging</a></li><li><a href="#references">References</a></li></ul></nav></div><footer class="nav-footer" id="footer"><section class="copyright">Rails Setup 2019</section></footer></div></body></html>