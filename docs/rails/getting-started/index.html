<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>Getting Started with Rails · Rails Setup</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta name="description" content="&lt;p&gt;This guide covers getting up and running with Ruby on Rails.&lt;/p&gt;
"/><meta name="docsearch:language" content="en"/><meta property="og:title" content="Getting Started with Rails · Rails Setup"/><meta property="og:type" content="website"/><meta property="og:url" content="https://HenryTabima.github.io/rails-setup/"/><meta property="og:description" content="&lt;p&gt;This guide covers getting up and running with Ruby on Rails.&lt;/p&gt;
"/><meta property="og:image" content="https://HenryTabima.github.io/rails-setup/img/undraw_online.svg"/><meta name="twitter:card" content="summary"/><meta name="twitter:image" content="https://HenryTabima.github.io/rails-setup/img/undraw_tweetstorm.svg"/><link rel="shortcut icon" href="/rails-setup/img/favicon.ico"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css"/><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><script src="/rails-setup/js/scrollSpy.js"></script><link rel="stylesheet" href="/rails-setup/css/main.css"/><script src="/rails-setup/js/codetabs.js"></script></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/rails-setup/"><img class="logo" src="/rails-setup/img/favicon.ico" alt="Rails Setup"/><h2 class="headerTitleWithLogo">Rails Setup</h2></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class="siteNavGroupActive siteNavItemActive"><a href="/rails-setup/docs/rails/getting-started" target="_self">Rails</a></li><li class=""><a href="/rails-setup/docs/devise/overview" target="_self">Devise</a></li><li class=""><a href="https://github.com/HenryTabima/rails-setup" target="_self">GitHub</a></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="container docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><div class="hamburger-menu"><div class="line1"></div><div class="line2"></div><div class="line3"></div></div></div><h2><i>›</i><span>Start Here</span></h2><div class="tocToggler" id="tocToggler"><i class="icon-toc"></i></div></div><div class="navGroups"><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Start Here<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem navListItemActive"><a class="navItem" href="/rails-setup/docs/rails/getting-started">Getting Started with Rails</a></li><li class="navListItem"><a class="navItem" href="/rails-setup/docs/rails/development-dependencies-install">Development Dependencies Install</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Models<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/rails-setup/docs/rails/active-record-basics">Active Record Basics</a></li><li class="navListItem"><a class="navItem" href="/rails-setup/docs/rails/active-record-migrations">Active Record Migrations</a></li><li class="navListItem"><a class="navItem" href="/rails-setup/docs/rails/active-record-validations">Active Record Validations</a></li><li class="navListItem"><a class="navItem" href="/rails-setup/docs/rails/active-record-callbacks">Active Record Callbacks</a></li><li class="navListItem"><a class="navItem" href="/rails-setup/docs/rails/active-record-associations">Active Record Associations</a></li><li class="navListItem"><a class="navItem" href="/rails-setup/docs/rails/active-record-query">Active Record Query Interface</a></li><li class="navListItem"><a class="navItem" href="/rails-setup/docs/rails/multiple-databases">Multiple Databases with Active Record</a></li><li class="navListItem"><a class="navItem" href="/rails-setup/docs/rails/active-record-postgresql">Active Record and PostgreSQL</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Views<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/rails-setup/docs/rails/layouts-and-rendering">Layouts and Rendering in Rails</a></li><li class="navListItem"><a class="navItem" href="/rails-setup/docs/rails/action-view">Action View Overview</a></li><li class="navListItem"><a class="navItem" href="/rails-setup/docs/rails/action-view-form-helpers">Action View Form Helpers</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Controllers<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/rails-setup/docs/rails/action-controller">Action Controller Overview</a></li><li class="navListItem"><a class="navItem" href="/rails-setup/docs/rails/rails-routing">Rails Routing from the Outside In</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Other Components<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/rails-setup/docs/rails/active-support-core">Active Support Core Extensions</a></li><li class="navListItem"><a class="navItem" href="/rails-setup/docs/rails/active-support-instrumentation">Active Support Instrumentation</a></li><li class="navListItem"><a class="navItem" href="/rails-setup/docs/rails/action-mailer">Action Mailer Basics</a></li><li class="navListItem"><a class="navItem" href="/rails-setup/docs/rails/action-mailbox">Action Mailbox Basics</a></li><li class="navListItem"><a class="navItem" href="/rails-setup/docs/rails/active-model">Active Model Basics</a></li><li class="navListItem"><a class="navItem" href="/rails-setup/docs/rails/active-job">Active Job Basics</a></li><li class="navListItem"><a class="navItem" href="/rails-setup/docs/rails/action-text">Action Text Overview</a></li><li class="navListItem"><a class="navItem" href="/rails-setup/docs/rails/active-storage">Active Storage Overview</a></li><li class="navListItem"><a class="navItem" href="/rails-setup/docs/rails/action-cable">Action Cable Overview</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Digging Deeper<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/rails-setup/docs/rails/rails-i18n">Rails Internationalization (I18n) API</a></li><li class="navListItem"><a class="navItem" href="/rails-setup/docs/rails/testing-rails">Testing Rails Applications</a></li><li class="navListItem"><a class="navItem" href="/rails-setup/docs/rails/securing-rails">Securing Rails Applications</a></li><li class="navListItem"><a class="navItem" href="/rails-setup/docs/rails/debugging-rails">Debugging Rails Applications</a></li><li class="navListItem"><a class="navItem" href="/rails-setup/docs/rails/configuring-rails">Configuring Rails Applications</a></li><li class="navListItem"><a class="navItem" href="/rails-setup/docs/rails/rails-command-line">The Rails Command Line</a></li><li class="navListItem"><a class="navItem" href="/rails-setup/docs/rails/asset-pipeline">The Asset Pipeline</a></li><li class="navListItem"><a class="navItem" href="/rails-setup/docs/rails/working-with-javascript">Working with JavaScript in Rails</a></li><li class="navListItem"><a class="navItem" href="/rails-setup/docs/rails/autoloading-and-reloading">Autoloading and Reloading Constants</a></li><li class="navListItem"><a class="navItem" href="/rails-setup/docs/rails/caching-with-rails">Caching with Rails: An Overview</a></li><li class="navListItem"><a class="navItem" href="/rails-setup/docs/rails/api-only-apps">Using Rails for API-only Applications</a></li><li class="navListItem"><a class="navItem" href="/rails-setup/docs/rails/threading">Threading and Code Execution in Rails</a></li><li class="navListItem"><a class="navItem" href="/rails-setup/docs/rails/initialization">The Rails Initialization Process</a></li><li class="navListItem"><a class="navItem" href="/rails-setup/docs/rails/engines">Getting Started with Engines</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Extending Rails<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/rails-setup/docs/rails/rails-on-rack">Rails on Rack</a></li><li class="navListItem"><a class="navItem" href="/rails-setup/docs/rails/generators-&amp;-templates">Creating and Customizing Rails Generators &amp; Templates</a></li><li class="navListItem"><a class="navItem" href="/rails-setup/docs/rails/application-templates">Rails Application Templates</a></li><li class="navListItem"><a class="navItem" href="/rails-setup/docs/rails/creating-rails-plugins">The Basics of Creating Rails Plugins</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Contributions<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/rails-setup/docs/rails/contributing-to-rails">Contributing to Ruby on Rails</a></li><li class="navListItem"><a class="navItem" href="/rails-setup/docs/rails/api-documentation">API Documentation Guidelines</a></li><li class="navListItem"><a class="navItem" href="/rails-setup/docs/rails/guides-guidelines">Ruby on Rails Guides Guidelines</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Policies<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/rails-setup/docs/rails/maintenance-policy">Maintenance Policy for Ruby on Rails</a></li></ul></div></div></section></div><script>
            var coll = document.getElementsByClassName('collapsible');
            var checkActiveCategory = true;
            for (var i = 0; i < coll.length; i++) {
              var links = coll[i].nextElementSibling.getElementsByTagName('*');
              if (checkActiveCategory){
                for (var j = 0; j < links.length; j++) {
                  if (links[j].classList.contains('navListItemActive')){
                    coll[i].nextElementSibling.classList.toggle('hide');
                    coll[i].childNodes[1].classList.toggle('rotate');
                    checkActiveCategory = false;
                    break;
                  }
                }
              }

              coll[i].addEventListener('click', function() {
                var arrow = this.childNodes[1];
                arrow.classList.toggle('rotate');
                var content = this.nextElementSibling;
                content.classList.toggle('hide');
              });
            }

            document.addEventListener('DOMContentLoaded', function() {
              createToggler('#navToggler', '#docsNav', 'docsSliderActive');
              createToggler('#tocToggler', 'body', 'tocActive');

              var headings = document.querySelector('.toc-headings');
              headings && headings.addEventListener('click', function(event) {
                var el = event.target;
                while(el !== headings){
                  if (el.tagName === 'A') {
                    document.body.classList.remove('tocActive');
                    break;
                  } else{
                    el = el.parentNode;
                  }
                }
              }, false);

              function createToggler(togglerSelector, targetSelector, className) {
                var toggler = document.querySelector(togglerSelector);
                var target = document.querySelector(targetSelector);

                if (!toggler) {
                  return;
                }

                toggler.onclick = function(event) {
                  event.preventDefault();

                  target.classList.toggle(className);
                };
              }
            });
        </script></nav></div><div class="container mainContainer"><div class="wrapper"><div class="post"><header class="postHeader"><h1 class="postHeaderTitle">Getting Started with Rails</h1></header><article><div><span><p>This guide covers getting up and running with Ruby on Rails.</p>
<p>After reading this guide, you will know:</p>
<ul>
<li>How to install Rails, create a new Rails application, and connect your
application to a database.</li>
<li>The general layout of a Rails application.</li>
<li>The basic principles of MVC (Model, View, Controller) and RESTful design.</li>
<li>How to quickly generate the starting pieces of a Rails application.</li>
</ul>
<hr>
<h2><a class="anchor" aria-hidden="true" id="guide-assumptions"></a><a href="#guide-assumptions" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Guide Assumptions</h2>
<p>This guide is designed for beginners who want to get started with a Rails
application from scratch. It does not assume that you have any prior experience
with Rails.</p>
<p>Rails is a web application framework running on the Ruby programming language.
If you have no prior experience with Ruby, you will find a very steep learning
curve diving straight into Rails. There are several curated lists of online resources
for learning Ruby:</p>
<ul>
<li><a href="https://www.ruby-lang.org/en/documentation/">Official Ruby Programming Language website</a></li>
<li><a href="https://github.com/vhf/free-programming-books/blob/master/free-programming-books.md#ruby">List of Free Programming Books</a></li>
</ul>
<p>Be aware that some resources, while still excellent, cover versions of Ruby as old as
1.6, and commonly 1.8, and will not include some syntax that you will see in day-to-day
development with Rails.</p>
<h2><a class="anchor" aria-hidden="true" id="what-is-rails"></a><a href="#what-is-rails" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>What is Rails?</h2>
<p>Rails is a web application development framework written in the Ruby programming language.
It is designed to make programming web applications easier by making assumptions
about what every developer needs to get started. It allows you to write less
code while accomplishing more than many other languages and frameworks.
Experienced Rails developers also report that it makes web application
development more fun.</p>
<p>Rails is opinionated software. It makes the assumption that there is a &quot;best&quot;
way to do things, and it's designed to encourage that way - and in some cases to
discourage alternatives. If you learn &quot;The Rails Way&quot; you'll probably discover a
tremendous increase in productivity. If you persist in bringing old habits from
other languages to your Rails development, and trying to use patterns you
learned elsewhere, you may have a less happy experience.</p>
<p>The Rails philosophy includes two major guiding principles:</p>
<ul>
<li><strong>Don't Repeat Yourself:</strong> DRY is a principle of software development which
states that &quot;Every piece of knowledge must have a single, unambiguous, authoritative
representation within a system&quot;. By not writing the same information over and over
again, our code is more maintainable, more extensible, and less buggy.</li>
<li><strong>Convention Over Configuration:</strong> Rails has opinions about the best way to do many
things in a web application, and defaults to this set of conventions, rather than
require that you specify minutiae through endless configuration files.</li>
</ul>
<h2><a class="anchor" aria-hidden="true" id="creating-a-new-rails-project"></a><a href="#creating-a-new-rails-project" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Creating a New Rails Project</h2>
<p>The best way to read this guide is to follow it step by step. All steps are
essential to run this example application and no additional code or steps are
needed.</p>
<p>By following along with this guide, you'll create a Rails project called
<code>blog</code>, a (very) simple weblog. Before you can start building the application,
you need to make sure that you have Rails itself installed.</p>
<p>TIP: The examples below use <code>$</code> to represent your terminal prompt in a UNIX-like OS,
though it may have been customized to appear differently. If you are using Windows,
your prompt will look something like <code>c:\source_code&gt;</code></p>
<h3><a class="anchor" aria-hidden="true" id="installing-rails"></a><a href="#installing-rails" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Installing Rails</h3>
<p>Before you install Rails, you should check to make sure that your system has the
proper prerequisites installed. These include Ruby and SQLite3.</p>
<p>Open up a command line prompt. On macOS open Terminal.app, on Windows choose
&quot;Run&quot; from your Start menu and type 'cmd.exe'. Any commands prefaced with a
dollar sign <code>$</code> should be run in the command line. Verify that you have a
current version of Ruby installed:</p>
<pre><code class="hljs css language-bash">$ ruby -v
ruby 2.5.0
</code></pre>
<p>Rails requires Ruby version 2.5.0 or later. If the version number returned is
less than that number, you'll need to install a fresh copy of Ruby.</p>
<p>TIP: To quickly install Ruby and Ruby on Rails on your system in Windows, you can use
<a href="http://railsinstaller.org">Rails Installer</a>. For more installation methods for most
Operating Systems take a look at <a href="https://www.ruby-lang.org/en/documentation/installation/">ruby-lang.org</a>.</p>
<p>If you are working on Windows, you should also install the
<a href="https://rubyinstaller.org/downloads/">Ruby Installer Development Kit</a>.</p>
<p>You will also need an installation of the SQLite3 database.
Many popular UNIX-like OSes ship with an acceptable version of SQLite3.
On Windows, if you installed Rails through Rails Installer, you
already have SQLite installed. Others can find installation instructions
at the <a href="https://www.sqlite.org">SQLite3 website</a>.
Verify that it is correctly installed and in your PATH:</p>
<pre><code class="hljs css language-bash">$ sqlite3 --version
</code></pre>
<p>The program should report its version.</p>
<p>To install Rails, use the <code>gem install</code> command provided by RubyGems:</p>
<pre><code class="hljs css language-bash">$ gem install rails
</code></pre>
<p>To verify that you have everything installed correctly, you should be able to
run the following:</p>
<pre><code class="hljs css language-bash">$ rails --version
</code></pre>
<p>If it says something like &quot;Rails 6.0.0&quot;, you are ready to continue.</p>
<h3><a class="anchor" aria-hidden="true" id="creating-the-blog-application"></a><a href="#creating-the-blog-application" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Creating the Blog Application</h3>
<p>Rails comes with a number of scripts called generators that are designed to make
your development life easier by creating everything that's necessary to start
working on a particular task. One of these is the new application generator,
which will provide you with the foundation of a fresh Rails application so that
you don't have to write it yourself.</p>
<p>To use this generator, open a terminal, navigate to a directory where you have
rights to create files, and type:</p>
<pre><code class="hljs css language-bash">$ rails new blog
</code></pre>
<p>This will create a Rails application called Blog in a <code>blog</code> directory and
install the gem dependencies that are already mentioned in <code>Gemfile</code> using
<code>bundle install</code>.</p>
<p>NOTE: If you're using Windows Subsystem for Linux then there are currently some
limitations on file system notifications that mean you should disable the <code>spring</code>
and <code>listen</code> gems which you can do by running <code>rails new blog --skip-spring --skip-listen</code>.</p>
<p>TIP: You can see all of the command line options that the Rails application
builder accepts by running <code>rails new -h</code>.</p>
<p>After you create the blog application, switch to its folder:</p>
<pre><code class="hljs css language-bash">$ <span class="hljs-built_in">cd</span> blog
</code></pre>
<p>The <code>blog</code> directory has a number of auto-generated files and folders that make
up the structure of a Rails application. Most of the work in this tutorial will
happen in the <code>app</code> folder, but here's a basic rundown on the function of each
of the files and folders that Rails created by default:</p>
<table>
<thead>
<tr><th>File/Folder</th><th>Purpose</th></tr>
</thead>
<tbody>
<tr><td>app/</td><td>Contains the controllers, models, views, helpers, mailers, channels, jobs, and assets for your application. You'll focus on this folder for the remainder of this guide.</td></tr>
<tr><td>bin/</td><td>Contains the rails script that starts your app and can contain other scripts you use to setup, update, deploy, or run your application.</td></tr>
<tr><td>config/</td><td>Configure your application's routes, database, and more. This is covered in more detail in <a href="/rails-setup/docs/rails/configuring-rails">Configuring Rails Applications</a>.</td></tr>
<tr><td>config.ru</td><td>Rack configuration for Rack based servers used to start the application. For more information about Rack, see the <a href="https://rack.github.io/">Rack website</a>.</td></tr>
<tr><td>db/</td><td>Contains your current database schema, as well as the database migrations.</td></tr>
<tr><td>Gemfile<br>Gemfile.lock</td><td>These files allow you to specify what gem dependencies are needed for your Rails application. These files are used by the Bundler gem. For more information about Bundler, see the <a href="https://bundler.io">Bundler website</a>.</td></tr>
<tr><td>lib/</td><td>Extended modules for your application.</td></tr>
<tr><td>log/</td><td>Application log files.</td></tr>
<tr><td>package.json</td><td>This file allows you to specify what npm dependencies are needed for your Rails application. This file is used by Yarn. For more information about Yarn, see the <a href="https://yarnpkg.com/lang/en/">Yarn website</a>.</td></tr>
<tr><td>public/</td><td>The only folder seen by the world as-is. Contains static files and compiled assets.</td></tr>
<tr><td>Rakefile</td><td>This file locates and loads tasks that can be run from the command line. The task definitions are defined throughout the components of Rails. Rather than changing <code>Rakefile</code>, you should add your own tasks by adding files to the <code>lib/tasks</code> directory of your application.</td></tr>
<tr><td>README.md</td><td>This is a brief instruction manual for your application. You should edit this file to tell others what your application does, how to set it up, and so on.</td></tr>
<tr><td>storage/</td><td>Active Storage files for Disk Service. This is covered in <a href="/rails-setup/docs/rails/active-storage">Active Storage Overview</a>.</td></tr>
<tr><td>test/</td><td>Unit tests, fixtures, and other test apparatus. These are covered in <a href="/rails-setup/docs/rails/testing-rails">Testing Rails Applications</a>.</td></tr>
<tr><td>tmp/</td><td>Temporary files (like cache and pid files).</td></tr>
<tr><td>vendor/</td><td>A place for all third-party code. In a typical Rails application this includes vendored gems.</td></tr>
<tr><td>.gitignore</td><td>This file tells git which files (or patterns) it should ignore. See <a href="https://help.github.com/articles/ignoring-files">GitHub - Ignoring files</a> for more info about ignoring files.</td></tr>
<tr><td>.ruby-version</td><td>This file contains the default Ruby version.</td></tr>
</tbody>
</table>
<h2><a class="anchor" aria-hidden="true" id="hello-rails"></a><a href="#hello-rails" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Hello, Rails!</h2>
<p>To begin with, let's get some text up on screen quickly. To do this, you need to
get your Rails application server running.</p>
<h3><a class="anchor" aria-hidden="true" id="starting-up-the-web-server"></a><a href="#starting-up-the-web-server" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Starting up the Web Server</h3>
<p>You actually have a functional Rails application already. To see it, you need to
start a web server on your development machine. You can do this by running the
following in the <code>blog</code> directory:</p>
<pre><code class="hljs css language-bash">$ rails server
</code></pre>
<p>TIP: If you are using Windows, you have to pass the scripts under the <code>bin</code>
folder directly to the Ruby interpreter e.g. <code>ruby bin\rails server</code>.</p>
<p>TIP: JavaScript asset compression requires you
have a JavaScript runtime available on your system, in the absence
of a runtime you will see an <code>execjs</code> error during asset compression.
Usually macOS and Windows come with a JavaScript runtime installed.
<code>therubyrhino</code> is the recommended runtime for JRuby users and is added by
default to the <code>Gemfile</code> in apps generated under JRuby. You can investigate
all the supported runtimes at <a href="https://github.com/rails/execjs#readme">ExecJS</a>.</p>
<p>This will fire up Puma, a web server distributed with Rails by default. To see
your application in action, open a browser window and navigate to
<a href="http://localhost:3000">http://localhost:3000</a>. You should see the Rails default information page:</p>
<p><img src="https://edgeguides.rubyonrails.org/images/getting_started/rails_welcome.png" alt="Welcome aboard screenshot"></p>
<p>TIP: To stop the web server, hit Ctrl+C in the terminal window where it's
running. To verify the server has stopped you should see your command prompt
cursor again. For most UNIX-like systems including macOS this will be a
dollar sign <code>$</code>. In development mode, Rails does not generally require you to
restart the server; changes you make in files will be automatically picked up by
the server.</p>
<p>The &quot;Welcome aboard&quot; page is the <em>smoke test</em> for a new Rails application: it
makes sure that you have your software configured correctly enough to serve a
page.</p>
<h3><a class="anchor" aria-hidden="true" id="say-hello-rails"></a><a href="#say-hello-rails" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Say &quot;Hello&quot;, Rails</h3>
<p>To get Rails saying &quot;Hello&quot;, you need to create at minimum a <em>controller</em> and a
<em>view</em>.</p>
<p>A controller's purpose is to receive specific requests for the application.
<em>Routing</em> decides which controller receives which requests. Often, there is more
than one route to each controller, and different routes can be served by
different <em>actions</em>. Each action's purpose is to collect information to provide
it to a view.</p>
<p>A view's purpose is to display this information in a human readable format. An
important distinction to make is that it is the <em>controller</em>, not the view,
where information is collected. The view should just display that information.
By default, view templates are written in a language called eRuby (Embedded
Ruby) which is processed by the request cycle in Rails before being sent to the
user.</p>
<p>To create a new controller, you will need to run the &quot;controller&quot; generator and
tell it you want a controller called &quot;Welcome&quot; with an action called &quot;index&quot;,
just like this:</p>
<pre><code class="hljs css language-bash">$ rails generate controller Welcome index
</code></pre>
<p>Rails will create several files and a route for you.</p>
<pre><code class="hljs css language-bash">create  app/controllers/welcome_controller.rb
 route  get <span class="hljs-string">'welcome/index'</span>
invoke  erb
create    app/views/welcome
create    app/views/welcome/index.html.erb
invoke  test_unit
create    <span class="hljs-built_in">test</span>/controllers/welcome_controller_test.rb
invoke  helper
create    app/helpers/welcome_helper.rb
invoke    test_unit
invoke  assets
invoke    scss
create      app/assets/stylesheets/welcome.scss
</code></pre>
<p>Most important of these are of course the controller, located at
<code>app/controllers/welcome_controller.rb</code> and the view, located at
<code>app/views/welcome/index.html.erb</code>.</p>
<p>Open the <code>app/views/welcome/index.html.erb</code> file in your text editor. Delete all
of the existing code in the file, and replace it with the following single line
of code:</p>
<pre><code class="hljs css language-html"><span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>Hello, Rails!<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="setting-the-application-home-page"></a><a href="#setting-the-application-home-page" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Setting the Application Home Page</h3>
<p>Now that we have made the controller and view, we need to tell Rails when we
want &quot;Hello, Rails!&quot; to show up. In our case, we want it to show up when we
navigate to the root URL of our site, <a href="http://localhost:3000">http://localhost:3000</a>. At the moment,
&quot;Welcome aboard&quot; is occupying that spot.</p>
<p>Next, you have to tell Rails where your actual home page is located.</p>
<p>Open the file <code>config/routes.rb</code> in your editor.</p>
<pre><code class="hljs css language-ruby">Rails.application.routes.draw <span class="hljs-keyword">do</span>
  get <span class="hljs-string">'welcome/index'</span>

  <span class="hljs-comment"># For details on the DSL available within this file, see https://guides.rubyonrails.org/routing.html</span>
<span class="hljs-keyword">end</span>
</code></pre>
<p>This is your application's <em>routing file</em> which holds entries in a special
<a href="https://en.wikipedia.org/wiki/Domain-specific_language">DSL (domain-specific language)</a>
that tells Rails how to connect incoming requests to
controllers and actions.
Edit this file by adding the line of code <code>root 'welcome#index'</code>.
It should look something like the following:</p>
<pre><code class="hljs css language-ruby">Rails.application.routes.draw <span class="hljs-keyword">do</span>
  get <span class="hljs-string">'welcome/index'</span>

  root <span class="hljs-string">'welcome#index'</span>
<span class="hljs-keyword">end</span>
</code></pre>
<p><code>root 'welcome#index'</code> tells Rails to map requests to the root of the
application to the welcome controller's index action and <code>get 'welcome/index'</code>
tells Rails to map requests to <a href="http://localhost:3000/welcome/index">http://localhost:3000/welcome/index</a> to the
welcome controller's index action. This was created earlier when you ran the
controller generator (<code>rails generate controller Welcome index</code>).</p>
<p>Launch the web server again if you stopped it to generate the controller (<code>rails server</code>) and navigate to <a href="http://localhost:3000">http://localhost:3000</a> in your browser. You'll see the
&quot;Hello, Rails!&quot; message you put into <code>app/views/welcome/index.html.erb</code>,
indicating that this new route is indeed going to <code>WelcomeController</code>'s <code>index</code>
action and is rendering the view correctly.</p>
<p>TIP: For more information about routing, refer to <a href="/rails-setup/docs/rails/rails-routing">Rails Routing from the Outside In</a>.</p>
<h2><a class="anchor" aria-hidden="true" id="getting-up-and-running"></a><a href="#getting-up-and-running" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Getting Up and Running</h2>
<p>Now that you've seen how to create a controller, an action, and a view, let's
create something with a bit more substance.</p>
<p>In the Blog application, you will now create a new <em>resource</em>. A resource is the
term used for a collection of similar objects, such as articles, people, or
animals.
You can create, read, update, and destroy items for a resource and these
operations are referred to as <em>CRUD</em> operations.</p>
<p>Rails provides a <code>resources</code> method which can be used to declare a standard REST
resource. You need to add the <em>article resource</em> to the
<code>config/routes.rb</code> so the file will look as follows:</p>
<pre><code class="hljs css language-ruby">Rails.application.routes.draw <span class="hljs-keyword">do</span>
  get <span class="hljs-string">'welcome/index'</span>

  resources <span class="hljs-symbol">:articles</span>

  root <span class="hljs-string">'welcome#index'</span>
<span class="hljs-keyword">end</span>
</code></pre>
<p>If you run <code>rails routes</code>, you'll see that it has defined routes for all the
standard RESTful actions.  The meaning of the prefix column (and other columns)
will be seen later, but for now notice that Rails has inferred the
singular form <code>article</code> and makes meaningful use of the distinction.</p>
<pre><code class="hljs css language-bash">$ rails routes
       Prefix Verb   URI Pattern                  Controller<span class="hljs-comment">#Action</span>
welcome_index GET    /welcome/index(.:format)     welcome<span class="hljs-comment">#index</span>
     articles GET    /articles(.:format)          articles<span class="hljs-comment">#index</span>
              POST   /articles(.:format)          articles<span class="hljs-comment">#create</span>
  new_article GET    /articles/new(.:format)      articles<span class="hljs-comment">#new</span>
 edit_article GET    /articles/:id/edit(.:format) articles<span class="hljs-comment">#edit</span>
      article GET    /articles/:id(.:format)      articles<span class="hljs-comment">#show</span>
              PATCH  /articles/:id(.:format)      articles<span class="hljs-comment">#update</span>
              PUT    /articles/:id(.:format)      articles<span class="hljs-comment">#update</span>
              DELETE /articles/:id(.:format)      articles<span class="hljs-comment">#destroy</span>
         root GET    /                            welcome<span class="hljs-comment">#index</span>
</code></pre>
<p>In the next section, you will add the ability to create new articles in your
application and be able to view them. This is the &quot;C&quot; and the &quot;R&quot; from CRUD:
create and read. The form for doing this will look like this:</p>
<p><img src="https://edgeguides.rubyonrails.org/images/getting_started/new_article.png" alt="The new article form"></p>
<p>It will look a little basic for now, but that's ok. We'll look at improving the
styling for it afterwards.</p>
<h3><a class="anchor" aria-hidden="true" id="laying-down-the-groundwork"></a><a href="#laying-down-the-groundwork" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Laying down the groundwork</h3>
<p>Firstly, you need a place within the application to create a new article. A
great place for that would be at <code>/articles/new</code>. With the route already
defined, requests can now be made to <code>/articles/new</code> in the application.
Navigate to <a href="http://localhost:3000/articles/new">http://localhost:3000/articles/new</a> and you'll see a routing
error:</p>
<p><img src="https://edgeguides.rubyonrails.org/images/getting_started/routing_error_no_controller.png" alt="Another routing error, uninitialized constant ArticlesController"></p>
<p>This error occurs because the route needs to have a controller defined in order
to serve the request. The solution to this particular problem is simple: create
a controller called <code>ArticlesController</code>. You can do this by running this
command:</p>
<pre><code class="hljs css language-bash">$ rails generate controller Articles
</code></pre>
<p>If you open up the newly generated <code>app/controllers/articles_controller.rb</code>
you'll see a fairly empty controller:</p>
<pre><code class="hljs css language-ruby"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ArticlesController</span> &lt; ApplicationController</span>
<span class="hljs-keyword">end</span>
</code></pre>
<p>A controller is simply a class that is defined to inherit from
<code>ApplicationController</code>.
It's inside this class that you'll define methods that will become the actions
for this controller. These actions will perform CRUD operations on the articles
within our system.</p>
<p>NOTE: There are <code>public</code>, <code>private</code> and <code>protected</code> methods in Ruby,
but only <code>public</code> methods can be actions for controllers.
For more details check out <a href="http://www.ruby-doc.org/docs/ProgrammingRuby/">Programming Ruby</a>.</p>
<p>If you refresh <a href="http://localhost:3000/articles/new">http://localhost:3000/articles/new</a> now, you'll get a new error:</p>
<p><img src="https://edgeguides.rubyonrails.org/images/getting_started/unknown_action_new_for_articles.png" alt="Unknown action new for ArticlesController!"></p>
<p>This error indicates that Rails cannot find the <code>new</code> action inside the
<code>ArticlesController</code> that you just generated. This is because when controllers
are generated in Rails they are empty by default, unless you tell it
your desired actions during the generation process.</p>
<p>To manually define an action inside a controller, all you need to do is to
define a new method inside the controller. Open
<code>app/controllers/articles_controller.rb</code> and inside the <code>ArticlesController</code>
class, define the <code>new</code> method so that your controller now looks like this:</p>
<pre><code class="hljs css language-ruby"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ArticlesController</span> &lt; ApplicationController</span>
  <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">new</span></span>
  <span class="hljs-keyword">end</span>
<span class="hljs-keyword">end</span>
</code></pre>
<p>With the <code>new</code> method defined in <code>ArticlesController</code>, if you refresh
<a href="http://localhost:3000/articles/new">http://localhost:3000/articles/new</a> you'll see another error:</p>
<p>![Template is missing for articles/new]
(<a href="https://edgeguides.rubyonrails.org/images/getting_started/template_is_missing_articles_new.png">https://edgeguides.rubyonrails.org/images/getting_started/template_is_missing_articles_new.png</a>)</p>
<p>You're getting this error now because Rails expects plain actions like this one
to have views associated with them to display their information. With no view
available, Rails will raise an exception.</p>
<p>Let's look at the full error message again:</p>
<blockquote>
<p>ArticlesController#new is missing a template for request formats: text/html</p>
</blockquote>
<blockquote>
<p>NOTE!
Unless told otherwise, Rails expects an action to render a template with the same name, contained in a folder named after its controller. If this controller is an API responding with 204 (No Content), which does not require a template, then this error will occur when trying to access it via browser, since we expect an HTML template to be rendered for such requests. If that's the case, carry on.</p>
</blockquote>
<p>The message identifies which template is missing. In this case, it's the
<code>articles/new</code> template. Rails will first look for this template. If not found,
then it will attempt to load a template called <code>application/new</code>, because the
<code>ArticlesController</code> inherits from <code>ApplicationController</code>.</p>
<p>Next the message contains <code>request.formats</code> which specifies the format of
template to be served in response. It is set to <code>text/html</code> as we requested
this page via browser, so Rails is looking for an HTML template.</p>
<p>The simplest template that would work in this case would be one located at
<code>app/views/articles/new.html.erb</code>. The extension of this file name is important:
the first extension is the <em>format</em> of the template, and the second extension
is the <em>handler</em> that will be used to render the template. Rails is attempting
to find a template called <code>articles/new</code> within <code>app/views</code> for the
application. The format for this template can only be <code>html</code> and the default
handler for HTML is <code>erb</code>. Rails uses other handlers for other formats.
<code>builder</code> handler is used to build XML templates and <code>coffee</code> handler uses
CoffeeScript to build JavaScript templates. Since you want to create a new
HTML form, you will be using the <code>ERB</code> language which is designed to embed Ruby
in HTML.</p>
<p>Therefore the file should be called <code>articles/new.html.erb</code> and needs to be
located inside the <code>app/views</code> directory of the application.</p>
<p>Go ahead now and create a new file at <code>app/views/articles/new.html.erb</code> and
write this content in it:</p>
<pre><code class="hljs css language-html"><span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>New Article<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
</code></pre>
<p>When you refresh <a href="http://localhost:3000/articles/new">http://localhost:3000/articles/new</a> you'll now see that the
page has a title. The route, controller, action, and view are now working
harmoniously! It's time to create the form for a new article.</p>
<h3><a class="anchor" aria-hidden="true" id="the-first-form"></a><a href="#the-first-form" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>The first form</h3>
<p>To create a form within this template, you will use a <em>form
builder</em>. The primary form builder for Rails is provided by a helper
method called <code>form_with</code>. To use this method, add this code into
<code>app/views/articles/new.html.erb</code>:</p>
<pre><code class="hljs css language-html+erb"><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">%=</span></span></span><span class="ruby"> form_with <span class="hljs-symbol">scope:</span> <span class="hljs-symbol">:article</span>, <span class="hljs-symbol">local:</span> <span class="hljs-literal">true</span> <span class="hljs-keyword">do</span> <span class="hljs-params">|form|</span> </span><span class="xml"><span class="hljs-tag">%&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">%=</span></span></span><span class="ruby"> form.label <span class="hljs-symbol">:title</span> </span><span class="xml"><span class="hljs-tag">%&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">%=</span></span></span><span class="ruby"> form.text_field <span class="hljs-symbol">:title</span> </span><span class="xml"><span class="hljs-tag">%&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>

  <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">%=</span></span></span><span class="ruby"> form.label <span class="hljs-symbol">:text</span> </span><span class="xml"><span class="hljs-tag">%&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">%=</span></span></span><span class="ruby"> form.text_area <span class="hljs-symbol">:text</span> </span><span class="xml"><span class="hljs-tag">%&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>

  <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">%=</span></span></span><span class="ruby"> form.submit </span><span class="xml"><span class="hljs-tag">%&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">%</span></span></span><span class="ruby"> <span class="hljs-keyword">end</span> </span><span class="xml"><span class="hljs-tag">%&gt;</span>
</span></code></pre>
<p>If you refresh the page now, you'll see the exact same form from our example above.
Building forms in Rails is really just that easy!</p>
<p>When you call <code>form_with</code>, you pass it an identifying scope for this
form. In this case, it's the symbol <code>:article</code>. This tells the <code>form_with</code>
helper what this form is for. Inside the block for this method, the
<code>FormBuilder</code> object - represented by <code>form</code> - is used to build two labels and two
text fields, one each for the title and text of an article. Finally, a call to
<code>submit</code> on the <code>form</code> object will create a submit button for the form.</p>
<p>There's one problem with this form though. If you inspect the HTML that is
generated, by viewing the source of the page, you will see that the <code>action</code>
attribute for the form is pointing at <code>/articles/new</code>. This is a problem because
this route goes to the very page that you're on right at the moment, and that
route should only be used to display the form for a new article.</p>
<p>The form needs to use a different URL in order to go somewhere else.
This can be done quite simply with the <code>:url</code> option of <code>form_with</code>.
Typically in Rails, the action that is used for new form submissions
like this is called &quot;create&quot;, and so the form should be pointed to that action.</p>
<p>Edit the <code>form_with</code> line inside <code>app/views/articles/new.html.erb</code> to look like
this:</p>
<pre><code class="hljs css language-html+erb"><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">%=</span></span></span><span class="ruby"> form_with <span class="hljs-symbol">scope:</span> <span class="hljs-symbol">:article</span>, <span class="hljs-symbol">url:</span> articles_path, <span class="hljs-symbol">local:</span> <span class="hljs-literal">true</span> <span class="hljs-keyword">do</span> <span class="hljs-params">|form|</span> </span><span class="xml"><span class="hljs-tag">%&gt;</span>
</span></code></pre>
<p>In this example, the <code>articles_path</code> helper is passed to the <code>:url</code> option.
To see what Rails will do with this, we look back at the output of
<code>rails routes</code>:</p>
<pre><code class="hljs css language-bash">$ rails routes
      Prefix Verb   URI Pattern                  Controller<span class="hljs-comment">#Action</span>
welcome_index GET    /welcome/index(.:format)     welcome<span class="hljs-comment">#index</span>
     articles GET    /articles(.:format)          articles<span class="hljs-comment">#index</span>
              POST   /articles(.:format)          articles<span class="hljs-comment">#create</span>
  new_article GET    /articles/new(.:format)      articles<span class="hljs-comment">#new</span>
 edit_article GET    /articles/:id/edit(.:format) articles<span class="hljs-comment">#edit</span>
      article GET    /articles/:id(.:format)      articles<span class="hljs-comment">#show</span>
              PATCH  /articles/:id(.:format)      articles<span class="hljs-comment">#update</span>
              PUT    /articles/:id(.:format)      articles<span class="hljs-comment">#update</span>
              DELETE /articles/:id(.:format)      articles<span class="hljs-comment">#destroy</span>
         root GET    /                            welcome<span class="hljs-comment">#index</span>
</code></pre>
<p>The <code>articles_path</code> helper tells Rails to point the form to the URI Pattern
associated with the <code>articles</code> prefix; and the form will (by default) send a
<code>POST</code> request to that route. This is associated with the <code>create</code> action of
the current controller, the <code>ArticlesController</code>.</p>
<p>With the form and its associated route defined, you will be able to fill in the
form and then click the submit button to begin the process of creating a new
article, so go ahead and do that. When you submit the form, you should see a
familiar error:</p>
<p>![Unknown action create for ArticlesController]
(<a href="https://edgeguides.rubyonrails.org/images/getting_started/unknown_action_create_for_articles.png">https://edgeguides.rubyonrails.org/images/getting_started/unknown_action_create_for_articles.png</a>)</p>
<p>You now need to create the <code>create</code> action within the <code>ArticlesController</code> for
this to work.</p>
<p>NOTE: By default <code>form_with</code> submits forms using Ajax thereby skipping full page
redirects. To make this guide easier to get into we've disabled that with
<code>local: true</code> for now.</p>
<h3><a class="anchor" aria-hidden="true" id="creating-articles"></a><a href="#creating-articles" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Creating articles</h3>
<p>To make the &quot;Unknown action&quot; go away, you can define a <code>create</code> action within
the <code>ArticlesController</code> class in <code>app/controllers/articles_controller.rb</code>,
underneath the <code>new</code> action, as shown:</p>
<pre><code class="hljs css language-ruby"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ArticlesController</span> &lt; ApplicationController</span>
  <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">new</span></span>
  <span class="hljs-keyword">end</span>

  <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">create</span></span>
  <span class="hljs-keyword">end</span>
<span class="hljs-keyword">end</span>
</code></pre>
<p>If you re-submit the form now, you may not see any change on the page. Don't worry!
This is because Rails by default returns <code>204 No Content</code> response for an action if
we don't specify what the response should be. We just added the <code>create</code> action
but didn't specify anything about how the response should be. In this case, the
<code>create</code> action should save our new article to the database.</p>
<p>When a form is submitted, the fields of the form are sent to Rails as
<em>parameters</em>. These parameters can then be referenced inside the controller
actions, typically to perform a particular task. To see what these parameters
look like, change the <code>create</code> action to this:</p>
<pre><code class="hljs css language-ruby"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">create</span></span>
  render <span class="hljs-symbol">plain:</span> params[<span class="hljs-symbol">:article</span>].inspect
<span class="hljs-keyword">end</span>
</code></pre>
<p>The <code>render</code> method here is taking a very simple hash with a key of <code>:plain</code> and
value of <code>params[:article].inspect</code>. The <code>params</code> method is the object which
represents the parameters (or fields) coming in from the form. The <code>params</code>
method returns an <code>ActionController::Parameters</code> object, which
allows you to access the keys of the hash using either strings or symbols. In
this situation, the only parameters that matter are the ones from the form.</p>
<p>TIP: Ensure you have a firm grasp of the <code>params</code> method, as you'll use it fairly regularly. Let's consider an example URL: <strong><a href="http://www.example.com/?username=dhh&amp;email=dhh@email.com">http://www.example.com/?username=dhh&amp;email=dhh@email.com</a></strong>. In this URL, <code>params[:username]</code> would equal &quot;dhh&quot; and <code>params[:email]</code> would equal &quot;<a href="mailto:dhh@email.com">dhh@email.com</a>&quot;.</p>
<p>If you re-submit the form one more time, you'll see something that looks like the following:</p>
<pre><code class="hljs css language-ruby">&lt;ActionController::Parameters {<span class="hljs-string">"title"</span>=&gt;<span class="hljs-string">"First Article!"</span>, <span class="hljs-string">"text"</span>=&gt;<span class="hljs-string">"This is my first article."</span>} <span class="hljs-symbol">permitted:</span> <span class="hljs-literal">false</span>&gt;
</code></pre>
<p>This action is now displaying the parameters for the article that are coming in
from the form. However, this isn't really all that helpful. Yes, you can see the
parameters but nothing in particular is being done with them.</p>
<h3><a class="anchor" aria-hidden="true" id="creating-the-article-model"></a><a href="#creating-the-article-model" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Creating the Article model</h3>
<p>Models in Rails use a singular name, and their corresponding database tables
use a plural name. Rails provides a generator for creating models, which most
Rails developers tend to use when creating new models. To create the new model,
run this command in your terminal:</p>
<pre><code class="hljs css language-bash">$ rails generate model Article title:string text:text
</code></pre>
<p>With that command we told Rails that we want an <code>Article</code> model, together
with a <em>title</em> attribute of type string, and a <em>text</em> attribute
of type text. Those attributes are automatically added to the <code>articles</code>
table in the database and mapped to the <code>Article</code> model.</p>
<p>Rails responded by creating a bunch of files. For now, we're only interested
in <code>app/models/article.rb</code> and <code>db/migrate/20140120191729_create_articles.rb</code>
(your name could be a bit different). The latter is responsible for creating
the database structure, which is what we'll look at next.</p>
<p>TIP: Active Record is smart enough to automatically map column names to model
attributes, which means you don't have to declare attributes inside Rails
models, as that will be done automatically by Active Record.</p>
<h3><a class="anchor" aria-hidden="true" id="running-a-migration"></a><a href="#running-a-migration" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Running a Migration</h3>
<p>As we've just seen, <code>rails generate model</code> created a <em>database migration</em> file
inside the <code>db/migrate</code> directory. Migrations are Ruby classes that are
designed to make it simple to create and modify database tables. Rails uses
rake commands to run migrations, and it's possible to undo a migration after
it's been applied to your database. Migration filenames include a timestamp to
ensure that they're processed in the order that they were created.</p>
<p>If you look in the <code>db/migrate/YYYYMMDDHHMMSS_create_articles.rb</code> file
(remember, yours will have a slightly different name), here's what you'll find:</p>
<pre><code class="hljs css language-ruby"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">CreateArticles</span> &lt; ActiveRecord::Migration[6.0]</span>
  <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">change</span></span>
    create_table <span class="hljs-symbol">:articles</span> <span class="hljs-keyword">do</span> <span class="hljs-params">|t|</span>
      t.string <span class="hljs-symbol">:title</span>
      t.text <span class="hljs-symbol">:text</span>

      t.timestamps
    <span class="hljs-keyword">end</span>
  <span class="hljs-keyword">end</span>
<span class="hljs-keyword">end</span>
</code></pre>
<p>The above migration creates a method named <code>change</code> which will be called when
you run this migration. The action defined in this method is also reversible,
which means Rails knows how to reverse the change made by this migration,
in case you want to reverse it later. When you run this migration it will create
an <code>articles</code> table with one string column and a text column. It also creates
two timestamp fields to allow Rails to track article creation and update times.</p>
<p>TIP: For more information about migrations, refer to [Active Record Migrations]
(active_record_migrations.md).</p>
<p>At this point, you can use a rails command to run the migration:</p>
<pre><code class="hljs css language-bash">$ rails db:migrate
</code></pre>
<p>Rails will execute this migration command and tell you it created the Articles
table.</p>
<pre><code class="hljs css language-bash">==  CreateArticles: migrating ==================================================
-- create_table(:articles)
   -&gt; 0.0019s
==  CreateArticles: migrated (0.0020s) =========================================
</code></pre>
<p>NOTE. Because you're working in the development environment by default, this
command will apply to the database defined in the <code>development</code> section of your
<code>config/database.yml</code> file. If you would like to execute migrations in another
environment, for instance in production, you must explicitly pass it when
invoking the command: <code>rails db:migrate RAILS_ENV=production</code>.</p>
<h3><a class="anchor" aria-hidden="true" id="saving-data-in-the-controller"></a><a href="#saving-data-in-the-controller" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Saving data in the controller</h3>
<p>Back in <code>ArticlesController</code>, we need to change the <code>create</code> action
to use the new <code>Article</code> model to save the data in the database.
Open <code>app/controllers/articles_controller.rb</code> and change the <code>create</code> action to
look like this:</p>
<pre><code class="hljs css language-ruby"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">create</span></span>
  @article = Article.new(params[<span class="hljs-symbol">:article</span>])

  @article.save
  redirect_to @article
<span class="hljs-keyword">end</span>
</code></pre>
<p>Here's what's going on: every Rails model can be initialized with its
respective attributes, which are automatically mapped to the respective
database columns. In the first line we do just that (remember that
<code>params[:article]</code> contains the attributes we're interested in). Then,
<code>@article.save</code> is responsible for saving the model in the database. Finally,
we redirect the user to the <code>show</code> action, which we'll define later.</p>
<p>TIP: You might be wondering why the <code>A</code> in <code>Article.new</code> is capitalized above, whereas most other references to articles in this guide have used lowercase. In this context, we are referring to the class named <code>Article</code> that is defined in <code>app/models/article.rb</code>. Class names in Ruby must begin with a capital letter.</p>
<p>TIP: As we'll see later, <code>@article.save</code> returns a boolean indicating whether
the article was saved or not.</p>
<p>If you now go to <a href="http://localhost:3000/articles/new">http://localhost:3000/articles/new</a> you'll <em>almost</em> be able
to create an article. Try it! You should get an error that looks like this:</p>
<p>![Forbidden attributes for new article]
(<a href="https://edgeguides.rubyonrails.org/images/getting_started/forbidden_attributes_for_new_article.png">https://edgeguides.rubyonrails.org/images/getting_started/forbidden_attributes_for_new_article.png</a>)</p>
<p>Rails has several security features that help you write secure applications,
and you're running into one of them now. This one is called <a href="/rails-setup/docs/rails/action-controller#strong-parameters">strong parameters</a>,
which requires us to tell Rails exactly which parameters are allowed into our
controller actions.</p>
<p>Why do you have to bother? The ability to grab and automatically assign all
controller parameters to your model in one shot makes the programmer's job
easier, but this convenience also allows malicious use. What if a request to
the server was crafted to look like a new article form submit but also included
extra fields with values that violated your application's integrity? They would
be 'mass assigned' into your model and then into the database along with the
good stuff - potentially breaking your application or worse.</p>
<p>We have to define our permitted controller parameters to prevent wrongful mass
assignment. In this case, we want to both allow and require the <code>title</code> and
<code>text</code> parameters for valid use of <code>create</code>. The syntax for this introduces
<code>require</code> and <code>permit</code>. The change will involve one line in the <code>create</code>
action:</p>
<pre><code class="hljs css language-ruby">  @article = Article.new(params.<span class="hljs-keyword">require</span>(<span class="hljs-symbol">:article</span>).permit(<span class="hljs-symbol">:title</span>, <span class="hljs-symbol">:text</span>))
</code></pre>
<p>This is often factored out into its own method so it can be reused by multiple
actions in the same controller, for example <code>create</code> and <code>update</code>. Above and
beyond mass assignment issues, the method is often made <code>private</code> to make sure
it can't be called outside its intended context. Here is the result:</p>
<pre><code class="hljs css language-ruby"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">create</span></span>
  @article = Article.new(article_params)

  @article.save
  redirect_to @article
<span class="hljs-keyword">end</span>

private
  <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">article_params</span></span>
    params.<span class="hljs-keyword">require</span>(<span class="hljs-symbol">:article</span>).permit(<span class="hljs-symbol">:title</span>, <span class="hljs-symbol">:text</span>)
  <span class="hljs-keyword">end</span>
</code></pre>
<p>TIP: For more information, refer to the reference above and
[this blog article about Strong Parameters]
(<a href="https://weblog.rubyonrails.org/2012/3/21/strong-parameters/">https://weblog.rubyonrails.org/2012/3/21/strong-parameters/</a>).</p>
<h3><a class="anchor" aria-hidden="true" id="showing-articles"></a><a href="#showing-articles" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Showing Articles</h3>
<p>If you submit the form again now, Rails will complain about not finding the
<code>show</code> action. That's not very useful though, so let's add the <code>show</code> action
before proceeding.</p>
<p>As we have seen in the output of <code>rails routes</code>, the route for <code>show</code> action is
as follows:</p>
<pre><code class="hljs"><span class="hljs-selector-tag">article</span> GET    /articles/:id(.:format)      articles<span class="hljs-selector-id">#show</span>
</code></pre>
<p>The special syntax <code>:id</code> tells rails that this route expects an <code>:id</code>
parameter, which in our case will be the id of the article.</p>
<p>As we did before, we need to add the <code>show</code> action in
<code>app/controllers/articles_controller.rb</code> and its respective view.</p>
<p>NOTE: A frequent practice is to place the standard CRUD actions in each
controller in the following order: <code>index</code>, <code>show</code>, <code>new</code>, <code>edit</code>, <code>create</code>, <code>update</code>
and <code>destroy</code>. You may use any order you choose, but keep in mind that these
are public methods; as mentioned earlier in this guide, they must be placed
before declaring <code>private</code> visibility in the controller.</p>
<p>Given that, let's add the <code>show</code> action, as follows:</p>
<pre><code class="hljs css language-ruby"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ArticlesController</span> &lt; ApplicationController</span>
  <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">show</span></span>
    @article = Article.find(params[<span class="hljs-symbol">:id</span>])
  <span class="hljs-keyword">end</span>

  <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">new</span></span>
  <span class="hljs-keyword">end</span>

  <span class="hljs-comment"># snippet for brevity</span>
</code></pre>
<p>A couple of things to note. We use <code>Article.find</code> to find the article we're
interested in, passing in <code>params[:id]</code> to get the <code>:id</code> parameter from the
request. We also use an instance variable (prefixed with <code>@</code>) to hold a
reference to the article object. We do this because Rails will pass all instance
variables to the view.</p>
<p>Now, create a new file <code>app/views/articles/show.html.erb</code> with the following
content:</p>
<pre><code class="hljs css language-html+erb"><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">strong</span>&gt;</span>Title:<span class="hljs-tag">&lt;/<span class="hljs-name">strong</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">%=</span></span></span><span class="ruby"> @article.title </span><span class="xml"><span class="hljs-tag">%&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">strong</span>&gt;</span>Text:<span class="hljs-tag">&lt;/<span class="hljs-name">strong</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">%=</span></span></span><span class="ruby"> @article.text </span><span class="xml"><span class="hljs-tag">%&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
</span></code></pre>
<p>With this change, you should finally be able to create new articles.
Visit <a href="http://localhost:3000/articles/new">http://localhost:3000/articles/new</a> and give it a try!</p>
<p><img src="https://edgeguides.rubyonrails.org/images/getting_started/show_action_for_articles.png" alt="Show action for articles"></p>
<h3><a class="anchor" aria-hidden="true" id="listing-all-articles"></a><a href="#listing-all-articles" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Listing all articles</h3>
<p>We still need a way to list all our articles, so let's do that.
The route for this as per output of <code>rails routes</code> is:</p>
<pre><code class="hljs">articles <span class="hljs-keyword">GET</span>    /articles(.:<span class="hljs-keyword">format</span>)          articles#<span class="hljs-keyword">index</span>
</code></pre>
<p>Add the corresponding <code>index</code> action for that route inside the
<code>ArticlesController</code> in the <code>app/controllers/articles_controller.rb</code> file.
When we write an <code>index</code> action, the usual practice is to place it as the
first method in the controller. Let's do it:</p>
<pre><code class="hljs css language-ruby"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ArticlesController</span> &lt; ApplicationController</span>
  <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">index</span></span>
    @articles = Article.all
  <span class="hljs-keyword">end</span>

  <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">show</span></span>
    @article = Article.find(params[<span class="hljs-symbol">:id</span>])
  <span class="hljs-keyword">end</span>

  <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">new</span></span>
  <span class="hljs-keyword">end</span>

  <span class="hljs-comment"># snippet for brevity</span>
</code></pre>
<p>And then finally, add the view for this action, located at
<code>app/views/articles/index.html.erb</code>:</p>
<pre><code class="hljs css language-html+erb"><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>Listing articles<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">table</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">tr</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">th</span>&gt;</span>Title<span class="hljs-tag">&lt;/<span class="hljs-name">th</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">th</span>&gt;</span>Text<span class="hljs-tag">&lt;/<span class="hljs-name">th</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">th</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">th</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">tr</span>&gt;</span>

  <span class="hljs-tag">&lt;<span class="hljs-name">%</span></span></span><span class="ruby"> @articles.each <span class="hljs-keyword">do</span> <span class="hljs-params">|article|</span> </span><span class="xml"><span class="hljs-tag">%&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">tr</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">%=</span></span></span><span class="ruby"> article.title </span><span class="xml"><span class="hljs-tag">%&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">%=</span></span></span><span class="ruby"> article.text </span><span class="xml"><span class="hljs-tag">%&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">%=</span></span></span><span class="ruby"> link_to <span class="hljs-string">'Show'</span>, article_path(article) </span><span class="xml"><span class="hljs-tag">%&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">tr</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">%</span></span></span><span class="ruby"> <span class="hljs-keyword">end</span> </span><span class="xml"><span class="hljs-tag">%&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">table</span>&gt;</span>
</span></code></pre>
<p>Now if you go to <a href="http://localhost:3000/articles">http://localhost:3000/articles</a> you will see a list of all the
articles that you have created.</p>
<h3><a class="anchor" aria-hidden="true" id="adding-links"></a><a href="#adding-links" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Adding links</h3>
<p>You can now create, show, and list articles. Now let's add some links to
navigate through pages.</p>
<p>Open <code>app/views/welcome/index.html.erb</code> and modify it as follows:</p>
<pre><code class="hljs css language-html+erb"><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>Hello, Rails!<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">%=</span></span></span><span class="ruby"> link_to <span class="hljs-string">'My Blog'</span>, <span class="hljs-symbol">controller:</span> <span class="hljs-string">'articles'</span> </span><span class="xml"><span class="hljs-tag">%&gt;</span>
</span></code></pre>
<p>The <code>link_to</code> method is one of Rails' built-in view helpers. It creates a
hyperlink based on text to display and where to go - in this case, to the path
for articles.</p>
<p>Let's add links to the other views as well, starting with adding this
&quot;New Article&quot; link to <code>app/views/articles/index.html.erb</code>, placing it above the
<code>&lt;table&gt;</code> tag:</p>
<pre><code class="hljs css language-erb"><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">%=</span></span></span><span class="ruby"> link_to <span class="hljs-string">'New article'</span>, new_article_path </span><span class="xml"><span class="hljs-tag">%&gt;</span>
</span></code></pre>
<p>This link will allow you to bring up the form that lets you create a new article.</p>
<p>Now, add another link in <code>app/views/articles/new.html.erb</code>, underneath the
form, to go back to the <code>index</code> action:</p>
<pre><code class="hljs css language-erb"><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">%=</span></span></span><span class="ruby"> form_with <span class="hljs-symbol">scope:</span> <span class="hljs-symbol">:article</span>, <span class="hljs-symbol">url:</span> articles_path, <span class="hljs-symbol">local:</span> <span class="hljs-literal">true</span> <span class="hljs-keyword">do</span> <span class="hljs-params">|form|</span> </span><span class="xml"><span class="hljs-tag">%&gt;</span>
  ...
<span class="hljs-tag">&lt;<span class="hljs-name">%</span></span></span><span class="ruby"> <span class="hljs-keyword">end</span> </span><span class="xml"><span class="hljs-tag">%&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">%=</span></span></span><span class="ruby"> link_to <span class="hljs-string">'Back'</span>, articles_path </span><span class="xml"><span class="hljs-tag">%&gt;</span>
</span></code></pre>
<p>Finally, add a link to the <code>app/views/articles/show.html.erb</code> template to
go back to the <code>index</code> action as well, so that people who are viewing a single
article can go back and view the whole list again:</p>
<pre><code class="hljs css language-html+erb"><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">strong</span>&gt;</span>Title:<span class="hljs-tag">&lt;/<span class="hljs-name">strong</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">%=</span></span></span><span class="ruby"> @article.title </span><span class="xml"><span class="hljs-tag">%&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">strong</span>&gt;</span>Text:<span class="hljs-tag">&lt;/<span class="hljs-name">strong</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">%=</span></span></span><span class="ruby"> @article.text </span><span class="xml"><span class="hljs-tag">%&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">%=</span></span></span><span class="ruby"> link_to <span class="hljs-string">'Back'</span>, articles_path </span><span class="xml"><span class="hljs-tag">%&gt;</span>
</span></code></pre>
<p>TIP: If you want to link to an action in the same controller, you don't need to
specify the <code>:controller</code> option, as Rails will use the current controller by
default.</p>
<p>TIP: In development mode (which is what you're working in by default), Rails
reloads your application with every browser request, so there's no need to stop
and restart the web server when a change is made.</p>
<h3><a class="anchor" aria-hidden="true" id="adding-some-validation"></a><a href="#adding-some-validation" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Adding Some Validation</h3>
<p>The model file, <code>app/models/article.rb</code> is about as simple as it can get:</p>
<pre><code class="hljs css language-ruby"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Article</span> &lt; ApplicationRecord</span>
<span class="hljs-keyword">end</span>
</code></pre>
<p>There isn't much to this file - but note that the <code>Article</code> class inherits from
<code>ApplicationRecord</code>. <code>ApplicationRecord</code> inherits from <code>ActiveRecord::Base</code>
which supplies a great deal of functionality to your Rails models for free,
including basic database CRUD (Create, Read, Update, Destroy) operations, data
validation, as well as sophisticated search support and the ability to relate
multiple models to one another.</p>
<p>Rails includes methods to help you validate the data that you send to models.
Open the <code>app/models/article.rb</code> file and edit it:</p>
<pre><code class="hljs css language-ruby"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Article</span> &lt; ApplicationRecord</span>
  validates <span class="hljs-symbol">:title</span>, <span class="hljs-symbol">presence:</span> <span class="hljs-literal">true</span>,
                    <span class="hljs-symbol">length:</span> { <span class="hljs-symbol">minimum:</span> <span class="hljs-number">5</span> }
<span class="hljs-keyword">end</span>
</code></pre>
<p>These changes will ensure that all articles have a title that is at least five
characters long. Rails can validate a variety of conditions in a model,
including the presence or uniqueness of columns, their format, and the
existence of associated objects. Validations are covered in detail in <a href="/rails-setup/docs/rails/active-record-validations">Active
Record Validations</a>.</p>
<p>With the validation now in place, when you call <code>@article.save</code> on an invalid
article, it will return <code>false</code>. If you open
<code>app/controllers/articles_controller.rb</code> again, you'll notice that we don't
check the result of calling <code>@article.save</code> inside the <code>create</code> action.
If <code>@article.save</code> fails in this situation, we need to show the form back to the
user. To do this, change the <code>new</code> and <code>create</code> actions inside
<code>app/controllers/articles_controller.rb</code> to these:</p>
<pre><code class="hljs css language-ruby"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">new</span></span>
  @article = Article.new
<span class="hljs-keyword">end</span>

<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">create</span></span>
  @article = Article.new(article_params)

  <span class="hljs-keyword">if</span> @article.save
    redirect_to @article
  <span class="hljs-keyword">else</span>
    render <span class="hljs-string">'new'</span>
  <span class="hljs-keyword">end</span>
<span class="hljs-keyword">end</span>

private
  <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">article_params</span></span>
    params.<span class="hljs-keyword">require</span>(<span class="hljs-symbol">:article</span>).permit(<span class="hljs-symbol">:title</span>, <span class="hljs-symbol">:text</span>)
  <span class="hljs-keyword">end</span>
</code></pre>
<p>The <code>new</code> action is now creating a new instance variable called <code>@article</code>, and
you'll see why that is in just a few moments.</p>
<p>Notice that inside the <code>create</code> action we use <code>render</code> instead of <code>redirect_to</code>
when <code>save</code> returns <code>false</code>. The <code>render</code> method is used so that the <code>@article</code>
object is passed back to the <code>new</code> template when it is rendered. This rendering
is done within the same request as the form submission, whereas the
<code>redirect_to</code> will tell the browser to issue another request.</p>
<p>If you reload
<a href="http://localhost:3000/articles/new">http://localhost:3000/articles/new</a> and
try to save an article without a title, Rails will send you back to the
form, but that's not very useful. You need to tell the user that
something went wrong. To do that, you'll modify
<code>app/views/articles/new.html.erb</code> to check for error messages:</p>
<pre><code class="hljs css language-html+erb"><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">%=</span></span></span><span class="ruby"> form_with <span class="hljs-symbol">scope:</span> <span class="hljs-symbol">:article</span>, <span class="hljs-symbol">url:</span> articles_path, <span class="hljs-symbol">local:</span> <span class="hljs-literal">true</span> <span class="hljs-keyword">do</span> <span class="hljs-params">|form|</span> </span><span class="xml"><span class="hljs-tag">%&gt;</span>

  <span class="hljs-tag">&lt;<span class="hljs-name">%</span></span></span><span class="ruby"> <span class="hljs-keyword">if</span> @article.errors.any? </span><span class="xml"><span class="hljs-tag">%&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"error_explanation"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">%=</span></span></span><span class="ruby"> pluralize(@article.errors.count, <span class="hljs-string">"error"</span>) </span><span class="xml"><span class="hljs-tag">%&gt;</span> prohibited
        this article from being saved:
      <span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">ul</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">%</span></span></span><span class="ruby"> @article.errors.full_messages.each <span class="hljs-keyword">do</span> <span class="hljs-params">|msg|</span> </span><span class="xml"><span class="hljs-tag">%&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">%=</span></span></span><span class="ruby"> msg </span><span class="xml"><span class="hljs-tag">%&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">%</span></span></span><span class="ruby"> <span class="hljs-keyword">end</span> </span><span class="xml"><span class="hljs-tag">%&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">%</span></span></span><span class="ruby"> <span class="hljs-keyword">end</span> </span><span class="xml"><span class="hljs-tag">%&gt;</span>

  <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">%=</span></span></span><span class="ruby"> form.label <span class="hljs-symbol">:title</span> </span><span class="xml"><span class="hljs-tag">%&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">%=</span></span></span><span class="ruby"> form.text_field <span class="hljs-symbol">:title</span> </span><span class="xml"><span class="hljs-tag">%&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>

  <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">%=</span></span></span><span class="ruby"> form.label <span class="hljs-symbol">:text</span> </span><span class="xml"><span class="hljs-tag">%&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">%=</span></span></span><span class="ruby"> form.text_area <span class="hljs-symbol">:text</span> </span><span class="xml"><span class="hljs-tag">%&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>

  <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">%=</span></span></span><span class="ruby"> form.submit </span><span class="xml"><span class="hljs-tag">%&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">%</span></span></span><span class="ruby"> <span class="hljs-keyword">end</span> </span><span class="xml"><span class="hljs-tag">%&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">%=</span></span></span><span class="ruby"> link_to <span class="hljs-string">'Back'</span>, articles_path </span><span class="xml"><span class="hljs-tag">%&gt;</span>
</span></code></pre>
<p>A few things are going on. We check if there are any errors with
<code>@article.errors.any?</code>, and in that case we show a list of all
errors with <code>@article.errors.full_messages</code>.</p>
<p><code>pluralize</code> is a rails helper that takes a number and a string as its
arguments. If the number is greater than one, the string will be automatically
pluralized.</p>
<p>The reason why we added <code>@article = Article.new</code> in the <code>ArticlesController</code> is
that otherwise <code>@article</code> would be <code>nil</code> in our view, and calling
<code>@article.errors.any?</code> would throw an error.</p>
<p>TIP: Rails automatically wraps fields that contain an error with a div
with class <code>field_with_errors</code>. You can define a CSS rule to make them
standout.</p>
<p>Now you'll get a nice error message when saving an article without a title when
you attempt to do just that on the new article form
<a href="http://localhost:3000/articles/new">http://localhost:3000/articles/new</a>:</p>
<p><img src="https://edgeguides.rubyonrails.org/images/getting_started/form_with_errors.png" alt="Form With Errors"></p>
<h3><a class="anchor" aria-hidden="true" id="updating-articles"></a><a href="#updating-articles" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Updating Articles</h3>
<p>We've covered the &quot;CR&quot; part of CRUD. Now let's focus on the &quot;U&quot; part, updating
articles.</p>
<p>The first step we'll take is adding an <code>edit</code> action to the <code>ArticlesController</code>,
generally between the <code>new</code> and <code>create</code> actions, as shown:</p>
<pre><code class="hljs css language-ruby"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">new</span></span>
  @article = Article.new
<span class="hljs-keyword">end</span>

<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">edit</span></span>
  @article = Article.find(params[<span class="hljs-symbol">:id</span>])
<span class="hljs-keyword">end</span>

<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">create</span></span>
  @article = Article.new(article_params)

  <span class="hljs-keyword">if</span> @article.save
    redirect_to @article
  <span class="hljs-keyword">else</span>
    render <span class="hljs-string">'new'</span>
  <span class="hljs-keyword">end</span>
<span class="hljs-keyword">end</span>
</code></pre>
<p>The view will contain a form similar to the one we used when creating
new articles. Create a file called <code>app/views/articles/edit.html.erb</code> and make
it look as follows:</p>
<pre><code class="hljs css language-html+erb"><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>Edit article<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">%=</span></span></span><span class="ruby"> form_with(<span class="hljs-symbol">model:</span> @article, <span class="hljs-symbol">local:</span> <span class="hljs-literal">true</span>) <span class="hljs-keyword">do</span> <span class="hljs-params">|form|</span> </span><span class="xml"><span class="hljs-tag">%&gt;</span>

  <span class="hljs-tag">&lt;<span class="hljs-name">%</span></span></span><span class="ruby"> <span class="hljs-keyword">if</span> @article.errors.any? </span><span class="xml"><span class="hljs-tag">%&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"error_explanation"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">%=</span></span></span><span class="ruby"> pluralize(@article.errors.count, <span class="hljs-string">"error"</span>) </span><span class="xml"><span class="hljs-tag">%&gt;</span> prohibited
        this article from being saved:
      <span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">ul</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">%</span></span></span><span class="ruby"> @article.errors.full_messages.each <span class="hljs-keyword">do</span> <span class="hljs-params">|msg|</span> </span><span class="xml"><span class="hljs-tag">%&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">%=</span></span></span><span class="ruby"> msg </span><span class="xml"><span class="hljs-tag">%&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">%</span></span></span><span class="ruby"> <span class="hljs-keyword">end</span> </span><span class="xml"><span class="hljs-tag">%&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">%</span></span></span><span class="ruby"> <span class="hljs-keyword">end</span> </span><span class="xml"><span class="hljs-tag">%&gt;</span>

  <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">%=</span></span></span><span class="ruby"> form.label <span class="hljs-symbol">:title</span> </span><span class="xml"><span class="hljs-tag">%&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">%=</span></span></span><span class="ruby"> form.text_field <span class="hljs-symbol">:title</span> </span><span class="xml"><span class="hljs-tag">%&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>

  <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">%=</span></span></span><span class="ruby"> form.label <span class="hljs-symbol">:text</span> </span><span class="xml"><span class="hljs-tag">%&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">%=</span></span></span><span class="ruby"> form.text_area <span class="hljs-symbol">:text</span> </span><span class="xml"><span class="hljs-tag">%&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>

  <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">%=</span></span></span><span class="ruby"> form.submit </span><span class="xml"><span class="hljs-tag">%&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">%</span></span></span><span class="ruby"> <span class="hljs-keyword">end</span> </span><span class="xml"><span class="hljs-tag">%&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">%=</span></span></span><span class="ruby"> link_to <span class="hljs-string">'Back'</span>, articles_path </span><span class="xml"><span class="hljs-tag">%&gt;</span>
</span></code></pre>
<p>This time we point the form to the <code>update</code> action, which is not defined yet
but will be very soon.</p>
<p>Passing the article object to the <code>form_with</code> method will automatically set the URL for
submitting the edited article form. This option tells Rails that we want this
form to be submitted via the <code>PATCH</code> HTTP method, which is the HTTP method you're
expected to use to <strong>update</strong> resources according to the REST protocol.</p>
<p>Also, passing a model object to <code>form_with</code>, like <code>model: @article</code> in the edit
view above, will cause form helpers to fill in form fields with the corresponding
values of the object.  Passing in a symbol scope such as <code>scope: :article</code>, as
was done in the new view, only creates empty form fields.
More details can be found in [form_with documentation]
(<a href="https://api.rubyonrails.org/classes/ActionView/Helpers/FormHelper.html#method-i-form_with">https://api.rubyonrails.org/classes/ActionView/Helpers/FormHelper.html#method-i-form_with</a>).</p>
<p>Next, we need to create the <code>update</code> action in
<code>app/controllers/articles_controller.rb</code>.
Add it between the <code>create</code> action and the <code>private</code> method:</p>
<pre><code class="hljs css language-ruby"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">create</span></span>
  @article = Article.new(article_params)

  <span class="hljs-keyword">if</span> @article.save
    redirect_to @article
  <span class="hljs-keyword">else</span>
    render <span class="hljs-string">'new'</span>
  <span class="hljs-keyword">end</span>
<span class="hljs-keyword">end</span>

<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">update</span></span>
  @article = Article.find(params[<span class="hljs-symbol">:id</span>])

  <span class="hljs-keyword">if</span> @article.update(article_params)
    redirect_to @article
  <span class="hljs-keyword">else</span>
    render <span class="hljs-string">'edit'</span>
  <span class="hljs-keyword">end</span>
<span class="hljs-keyword">end</span>

private
  <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">article_params</span></span>
    params.<span class="hljs-keyword">require</span>(<span class="hljs-symbol">:article</span>).permit(<span class="hljs-symbol">:title</span>, <span class="hljs-symbol">:text</span>)
  <span class="hljs-keyword">end</span>
</code></pre>
<p>The new method, <code>update</code>, is used when you want to update a record
that already exists, and it accepts a hash containing the attributes
that you want to update. As before, if there was an error updating the
article we want to show the form back to the user.</p>
<p>We reuse the <code>article_params</code> method that we defined earlier for the create
action.</p>
<p>TIP: It is not necessary to pass all the attributes to <code>update</code>. For example,
if <code>@article.update(title: 'A new title')</code> was called, Rails would only update
the <code>title</code> attribute, leaving all other attributes untouched.</p>
<p>Finally, we want to show a link to the <code>edit</code> action in the list of all the
articles, so let's add that now to <code>app/views/articles/index.html.erb</code> to make
it appear next to the &quot;Show&quot; link:</p>
<pre><code class="hljs css language-html+erb"><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">table</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">tr</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">th</span>&gt;</span>Title<span class="hljs-tag">&lt;/<span class="hljs-name">th</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">th</span>&gt;</span>Text<span class="hljs-tag">&lt;/<span class="hljs-name">th</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">th</span> <span class="hljs-attr">colspan</span>=<span class="hljs-string">"2"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">th</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">tr</span>&gt;</span>

  <span class="hljs-tag">&lt;<span class="hljs-name">%</span></span></span><span class="ruby"> @articles.each <span class="hljs-keyword">do</span> <span class="hljs-params">|article|</span> </span><span class="xml"><span class="hljs-tag">%&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">tr</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">%=</span></span></span><span class="ruby"> article.title </span><span class="xml"><span class="hljs-tag">%&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">%=</span></span></span><span class="ruby"> article.text </span><span class="xml"><span class="hljs-tag">%&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">%=</span></span></span><span class="ruby"> link_to <span class="hljs-string">'Show'</span>, article_path(article) </span><span class="xml"><span class="hljs-tag">%&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">%=</span></span></span><span class="ruby"> link_to <span class="hljs-string">'Edit'</span>, edit_article_path(article) </span><span class="xml"><span class="hljs-tag">%&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">tr</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">%</span></span></span><span class="ruby"> <span class="hljs-keyword">end</span> </span><span class="xml"><span class="hljs-tag">%&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">table</span>&gt;</span>
</span></code></pre>
<p>And we'll also add one to the <code>app/views/articles/show.html.erb</code> template as
well, so that there's also an &quot;Edit&quot; link on an article's page. Add this at the
bottom of the template:</p>
<pre><code class="hljs css language-html+erb">...

&lt;%= link_to <span class="hljs-string">'Edit'</span>, edit_article_path(@article) %&gt; |
&lt;%= link_to <span class="hljs-string">'Back'</span>, articles_path %&gt;
</code></pre>
<p>And here's how our app looks so far:</p>
<p><img src="https://edgeguides.rubyonrails.org/images/getting_started/index_action_with_edit_link.png" alt="Index action with edit link"></p>
<h3><a class="anchor" aria-hidden="true" id="using-partials-to-clean-up-duplication-in-views"></a><a href="#using-partials-to-clean-up-duplication-in-views" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Using partials to clean up duplication in views</h3>
<p>Our <code>edit</code> page looks very similar to the <code>new</code> page; in fact, they
both share the same code for displaying the form. Let's remove this
duplication by using a view partial. By convention, partial files are
prefixed with an underscore.</p>
<p>TIP: You can read more about partials in the
<a href="/rails-setup/docs/rails/layouts-and-rendering">Layouts and Rendering in Rails</a> guide.</p>
<p>Create a new file <code>app/views/articles/_form.html.erb</code> with the following
content:</p>
<pre><code class="hljs css language-html+erb"><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">%=</span></span></span><span class="ruby"> form_with <span class="hljs-symbol">model:</span> @article, <span class="hljs-symbol">local:</span> <span class="hljs-literal">true</span> <span class="hljs-keyword">do</span> <span class="hljs-params">|form|</span> </span><span class="xml"><span class="hljs-tag">%&gt;</span>

  <span class="hljs-tag">&lt;<span class="hljs-name">%</span></span></span><span class="ruby"> <span class="hljs-keyword">if</span> @article.errors.any? </span><span class="xml"><span class="hljs-tag">%&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"error_explanation"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">%=</span></span></span><span class="ruby"> pluralize(@article.errors.count, <span class="hljs-string">"error"</span>) </span><span class="xml"><span class="hljs-tag">%&gt;</span> prohibited
        this article from being saved:
      <span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">ul</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">%</span></span></span><span class="ruby"> @article.errors.full_messages.each <span class="hljs-keyword">do</span> <span class="hljs-params">|msg|</span> </span><span class="xml"><span class="hljs-tag">%&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">%=</span></span></span><span class="ruby"> msg </span><span class="xml"><span class="hljs-tag">%&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">%</span></span></span><span class="ruby"> <span class="hljs-keyword">end</span> </span><span class="xml"><span class="hljs-tag">%&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">%</span></span></span><span class="ruby"> <span class="hljs-keyword">end</span> </span><span class="xml"><span class="hljs-tag">%&gt;</span>

  <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">%=</span></span></span><span class="ruby"> form.label <span class="hljs-symbol">:title</span> </span><span class="xml"><span class="hljs-tag">%&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">%=</span></span></span><span class="ruby"> form.text_field <span class="hljs-symbol">:title</span> </span><span class="xml"><span class="hljs-tag">%&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>

  <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">%=</span></span></span><span class="ruby"> form.label <span class="hljs-symbol">:text</span> </span><span class="xml"><span class="hljs-tag">%&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">%=</span></span></span><span class="ruby"> form.text_area <span class="hljs-symbol">:text</span> </span><span class="xml"><span class="hljs-tag">%&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>

  <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">%=</span></span></span><span class="ruby"> form.submit </span><span class="xml"><span class="hljs-tag">%&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">%</span></span></span><span class="ruby"> <span class="hljs-keyword">end</span> </span><span class="xml"><span class="hljs-tag">%&gt;</span>
</span></code></pre>
<p>Everything except for the <code>form_with</code> declaration remained the same.
The reason we can use this shorter, simpler <code>form_with</code> declaration
to stand in for either of the other forms is that <code>@article</code> is a <em>resource</em>
corresponding to a full set of RESTful routes, and Rails is able to infer
which URI and method to use.
For more information about this use of <code>form_with</code>, see [Resource-oriented style]
(<a href="https://api.rubyonrails.org/classes/ActionView/Helpers/FormHelper.html#method-i-form_with-label-Resource-oriented+style">https://api.rubyonrails.org/classes/ActionView/Helpers/FormHelper.html#method-i-form_with-label-Resource-oriented+style</a>).</p>
<p>Now, let's update the <code>app/views/articles/new.html.erb</code> view to use this new
partial, rewriting it completely:</p>
<pre><code class="hljs css language-html+erb"><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>New article<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">%=</span></span></span><span class="ruby"> render <span class="hljs-string">'form'</span> </span><span class="xml"><span class="hljs-tag">%&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">%=</span></span></span><span class="ruby"> link_to <span class="hljs-string">'Back'</span>, articles_path </span><span class="xml"><span class="hljs-tag">%&gt;</span>
</span></code></pre>
<p>Then do the same for the <code>app/views/articles/edit.html.erb</code> view:</p>
<pre><code class="hljs css language-html+erb"><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>Edit article<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">%=</span></span></span><span class="ruby"> render <span class="hljs-string">'form'</span> </span><span class="xml"><span class="hljs-tag">%&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">%=</span></span></span><span class="ruby"> link_to <span class="hljs-string">'Back'</span>, articles_path </span><span class="xml"><span class="hljs-tag">%&gt;</span>
</span></code></pre>
<h3><a class="anchor" aria-hidden="true" id="deleting-articles"></a><a href="#deleting-articles" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Deleting Articles</h3>
<p>We're now ready to cover the &quot;D&quot; part of CRUD, deleting articles from the
database. Following the REST convention, the route for
deleting articles as per output of <code>rails routes</code> is:</p>
<pre><code class="hljs css language-ruby">DELETE /articles/<span class="hljs-symbol">:id</span>(.<span class="hljs-symbol">:format</span>)      articles<span class="hljs-comment">#destroy</span>
</code></pre>
<p>The <code>delete</code> routing method should be used for routes that destroy
resources. If this was left as a typical <code>get</code> route, it could be possible for
people to craft malicious URLs like this:</p>
<pre><code class="hljs css language-html"><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">'http://example.com/articles/1/destroy'</span>&gt;</span>look at this cat!<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>
</code></pre>
<p>We use the <code>delete</code> method for destroying resources, and this route is mapped
to the <code>destroy</code> action inside <code>app/controllers/articles_controller.rb</code>, which
doesn't exist yet. The <code>destroy</code> method is generally the last CRUD action in
the controller, and like the other public CRUD actions, it must be placed
before any <code>private</code> or <code>protected</code> methods. Let's add it:</p>
<pre><code class="hljs css language-ruby"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">destroy</span></span>
  @article = Article.find(params[<span class="hljs-symbol">:id</span>])
  @article.destroy

  redirect_to articles_path
<span class="hljs-keyword">end</span>
</code></pre>
<p>The complete <code>ArticlesController</code> in the
<code>app/controllers/articles_controller.rb</code> file should now look like this:</p>
<pre><code class="hljs css language-ruby"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ArticlesController</span> &lt; ApplicationController</span>
  <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">index</span></span>
    @articles = Article.all
  <span class="hljs-keyword">end</span>

  <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">show</span></span>
    @article = Article.find(params[<span class="hljs-symbol">:id</span>])
  <span class="hljs-keyword">end</span>

  <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">new</span></span>
    @article = Article.new
  <span class="hljs-keyword">end</span>

  <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">edit</span></span>
    @article = Article.find(params[<span class="hljs-symbol">:id</span>])
  <span class="hljs-keyword">end</span>

  <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">create</span></span>
    @article = Article.new(article_params)

    <span class="hljs-keyword">if</span> @article.save
      redirect_to @article
    <span class="hljs-keyword">else</span>
      render <span class="hljs-string">'new'</span>
    <span class="hljs-keyword">end</span>
  <span class="hljs-keyword">end</span>

  <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">update</span></span>
    @article = Article.find(params[<span class="hljs-symbol">:id</span>])

    <span class="hljs-keyword">if</span> @article.update(article_params)
      redirect_to @article
    <span class="hljs-keyword">else</span>
      render <span class="hljs-string">'edit'</span>
    <span class="hljs-keyword">end</span>
  <span class="hljs-keyword">end</span>

  <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">destroy</span></span>
    @article = Article.find(params[<span class="hljs-symbol">:id</span>])
    @article.destroy

    redirect_to articles_path
  <span class="hljs-keyword">end</span>

  private
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">article_params</span></span>
      params.<span class="hljs-keyword">require</span>(<span class="hljs-symbol">:article</span>).permit(<span class="hljs-symbol">:title</span>, <span class="hljs-symbol">:text</span>)
    <span class="hljs-keyword">end</span>
<span class="hljs-keyword">end</span>
</code></pre>
<p>You can call <code>destroy</code> on Active Record objects when you want to delete
them from the database. Note that we don't need to add a view for this
action since we're redirecting to the <code>index</code> action.</p>
<p>Finally, add a 'Destroy' link to your <code>index</code> action template
(<code>app/views/articles/index.html.erb</code>) to wrap everything together.</p>
<pre><code class="hljs css language-html+erb"><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>Listing Articles<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">%=</span></span></span><span class="ruby"> link_to <span class="hljs-string">'New article'</span>, new_article_path </span><span class="xml"><span class="hljs-tag">%&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">table</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">tr</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">th</span>&gt;</span>Title<span class="hljs-tag">&lt;/<span class="hljs-name">th</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">th</span>&gt;</span>Text<span class="hljs-tag">&lt;/<span class="hljs-name">th</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">th</span> <span class="hljs-attr">colspan</span>=<span class="hljs-string">"3"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">th</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">tr</span>&gt;</span>

  <span class="hljs-tag">&lt;<span class="hljs-name">%</span></span></span><span class="ruby"> @articles.each <span class="hljs-keyword">do</span> <span class="hljs-params">|article|</span> </span><span class="xml"><span class="hljs-tag">%&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">tr</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">%=</span></span></span><span class="ruby"> article.title </span><span class="xml"><span class="hljs-tag">%&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">%=</span></span></span><span class="ruby"> article.text </span><span class="xml"><span class="hljs-tag">%&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">%=</span></span></span><span class="ruby"> link_to <span class="hljs-string">'Show'</span>, article_path(article) </span><span class="xml"><span class="hljs-tag">%&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">%=</span></span></span><span class="ruby"> link_to <span class="hljs-string">'Edit'</span>, edit_article_path(article) </span><span class="xml"><span class="hljs-tag">%&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">%=</span></span></span><span class="ruby"> link_to <span class="hljs-string">'Destroy'</span>, article_path(article),
              <span class="hljs-symbol">method:</span> <span class="hljs-symbol">:delete</span>,
              <span class="hljs-symbol">data:</span> { <span class="hljs-symbol">confirm:</span> <span class="hljs-string">'Are you sure?'</span> } </span><span class="xml"><span class="hljs-tag">%&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">tr</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">%</span></span></span><span class="ruby"> <span class="hljs-keyword">end</span> </span><span class="xml"><span class="hljs-tag">%&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">table</span>&gt;</span>
</span></code></pre>
<p>Here we're using <code>link_to</code> in a different way. We pass the named route as the
second argument, and then the options as another argument. The <code>method: :delete</code>
and <code>data: { confirm: 'Are you sure?' }</code> options are used as HTML5 attributes so
that when the link is clicked, Rails will first show a confirm dialog to the
user, and then submit the link with method <code>delete</code>.  This is done via the
JavaScript file <code>rails-ujs</code> which is automatically included in your
application's layout (<code>app/views/layouts/application.html.erb</code>) when you
generated the application. Without this file, the confirmation dialog box won't
appear.</p>
<p><img src="https://edgeguides.rubyonrails.org/images/getting_started/confirm_dialog.png" alt="Confirm Dialog"></p>
<p>TIP: Learn more about Unobtrusive JavaScript on
<a href="/rails-setup/docs/rails/working-with-javascript">Working With JavaScript in Rails</a> guide.</p>
<p>Congratulations, you can now create, show, list, update, and destroy
articles.</p>
<p>TIP: In general, Rails encourages using resources objects instead of
declaring routes manually. For more information about routing, see
<a href="/rails-setup/docs/rails/rails-routing">Rails Routing from the Outside In</a>.</p>
<h2><a class="anchor" aria-hidden="true" id="adding-a-second-model"></a><a href="#adding-a-second-model" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Adding a Second Model</h2>
<p>It's time to add a second model to the application. The second model will handle
comments on articles.</p>
<h3><a class="anchor" aria-hidden="true" id="generating-a-model"></a><a href="#generating-a-model" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Generating a Model</h3>
<p>We're going to see the same generator that we used before when creating
the <code>Article</code> model. This time we'll create a <code>Comment</code> model to hold a
reference to an article. Run this command in your terminal:</p>
<pre><code class="hljs css language-bash">$ rails generate model Comment commenter:string body:text article:references
</code></pre>
<p>This command will generate four files:</p>
<table>
<thead>
<tr><th>File</th><th>Purpose</th></tr>
</thead>
<tbody>
<tr><td>db/migrate/20140120201010_create_comments.rb</td><td>Migration to create the comments table in your database (your name will include a different timestamp)</td></tr>
<tr><td>app/models/comment.rb</td><td>The Comment model</td></tr>
<tr><td>test/models/comment_test.rb</td><td>Testing harness for the comment model</td></tr>
<tr><td>test/fixtures/comments.yml</td><td>Sample comments for use in testing</td></tr>
</tbody>
</table>
<p>First, take a look at <code>app/models/comment.rb</code>:</p>
<pre><code class="hljs css language-ruby"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Comment</span> &lt; ApplicationRecord</span>
  belongs_to <span class="hljs-symbol">:article</span>
<span class="hljs-keyword">end</span>
</code></pre>
<p>This is very similar to the <code>Article</code> model that you saw earlier. The difference
is the line <code>belongs_to :article</code>, which sets up an Active Record <em>association</em>.
You'll learn a little about associations in the next section of this guide.</p>
<p>The (<code>:references</code>) keyword used in the bash command is a special data type for models.
It creates a new column on your database table with the provided model name appended with an <code>_id</code>
that can hold integer values. To get a better understanding, analyze the
<code>db/schema.rb</code> file after running the migration.</p>
<p>In addition to the model, Rails has also made a migration to create the
corresponding database table:</p>
<pre><code class="hljs css language-ruby"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">CreateComments</span> &lt; ActiveRecord::Migration[6.0]</span>
  <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">change</span></span>
    create_table <span class="hljs-symbol">:comments</span> <span class="hljs-keyword">do</span> <span class="hljs-params">|t|</span>
      t.string <span class="hljs-symbol">:commenter</span>
      t.text <span class="hljs-symbol">:body</span>
      t.references <span class="hljs-symbol">:article</span>, <span class="hljs-symbol">null:</span> <span class="hljs-literal">false</span>, <span class="hljs-symbol">foreign_key:</span> <span class="hljs-literal">true</span>

      t.timestamps
    <span class="hljs-keyword">end</span>
  <span class="hljs-keyword">end</span>
<span class="hljs-keyword">end</span>
</code></pre>
<p>The <code>t.references</code> line creates an integer column called <code>article_id</code>, an index
for it, and a foreign key constraint that points to the <code>id</code> column of the <code>articles</code>
table. Go ahead and run the migration:</p>
<pre><code class="hljs css language-bash">$ rails db:migrate
</code></pre>
<p>Rails is smart enough to only execute the migrations that have not already been
run against the current database, so in this case you will just see:</p>
<pre><code class="hljs css language-bash">==  CreateComments: migrating =================================================
-- create_table(:comments)
   -&gt; 0.0115s
==  CreateComments: migrated (0.0119s) ========================================
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="associating-models"></a><a href="#associating-models" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Associating Models</h3>
<p>Active Record associations let you easily declare the relationship between two
models. In the case of comments and articles, you could write out the
relationships this way:</p>
<ul>
<li>Each comment belongs to one article.</li>
<li>One article can have many comments.</li>
</ul>
<p>In fact, this is very close to the syntax that Rails uses to declare this
association. You've already seen the line of code inside the <code>Comment</code> model
(app/models/comment.rb) that makes each comment belong to an Article:</p>
<pre><code class="hljs css language-ruby"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Comment</span> &lt; ApplicationRecord</span>
  belongs_to <span class="hljs-symbol">:article</span>
<span class="hljs-keyword">end</span>
</code></pre>
<p>You'll need to edit <code>app/models/article.rb</code> to add the other side of the
association:</p>
<pre><code class="hljs css language-ruby"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Article</span> &lt; ApplicationRecord</span>
  has_many <span class="hljs-symbol">:comments</span>
  validates <span class="hljs-symbol">:title</span>, <span class="hljs-symbol">presence:</span> <span class="hljs-literal">true</span>,
                    <span class="hljs-symbol">length:</span> { <span class="hljs-symbol">minimum:</span> <span class="hljs-number">5</span> }
<span class="hljs-keyword">end</span>
</code></pre>
<p>These two declarations enable a good bit of automatic behavior. For example, if
you have an instance variable <code>@article</code> containing an article, you can retrieve
all the comments belonging to that article as an array using
<code>@article.comments</code>.</p>
<p>TIP: For more information on Active Record associations, see the <a href="/rails-setup/docs/rails/active-record-associations">Active Record
Associations</a> guide.</p>
<h3><a class="anchor" aria-hidden="true" id="adding-a-route-for-comments"></a><a href="#adding-a-route-for-comments" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Adding a Route for Comments</h3>
<p>As with the <code>welcome</code> controller, we will need to add a route so that Rails
knows where we would like to navigate to see <code>comments</code>. Open up the
<code>config/routes.rb</code> file again, and edit it as follows:</p>
<pre><code class="hljs css language-ruby">resources <span class="hljs-symbol">:articles</span> <span class="hljs-keyword">do</span>
  resources <span class="hljs-symbol">:comments</span>
<span class="hljs-keyword">end</span>
</code></pre>
<p>This creates <code>comments</code> as a <em>nested resource</em> within <code>articles</code>. This is
another part of capturing the hierarchical relationship that exists between
articles and comments.</p>
<p>TIP: For more information on routing, see the <a href="/rails-setup/docs/rails/rails-routing">Rails Routing</a>
guide.</p>
<h3><a class="anchor" aria-hidden="true" id="generating-a-controller"></a><a href="#generating-a-controller" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Generating a Controller</h3>
<p>With the model in hand, you can turn your attention to creating a matching
controller. Again, we'll use the same generator we used before:</p>
<pre><code class="hljs css language-bash">$ rails generate controller Comments
</code></pre>
<p>This creates four files and one empty directory:</p>
<table>
<thead>
<tr><th>File/Directory</th><th>Purpose</th></tr>
</thead>
<tbody>
<tr><td>app/controllers/comments_controller.rb</td><td>The Comments controller</td></tr>
<tr><td>app/views/comments/</td><td>Views of the controller are stored here</td></tr>
<tr><td>test/controllers/comments_controller_test.rb</td><td>The test for the controller</td></tr>
<tr><td>app/helpers/comments_helper.rb</td><td>A view helper file</td></tr>
<tr><td>app/assets/stylesheets/comments.scss</td><td>Cascading style sheet for the controller</td></tr>
</tbody>
</table>
<p>Like with any blog, our readers will create their comments directly after
reading the article, and once they have added their comment, will be sent back
to the article show page to see their comment now listed. Due to this, our
<code>CommentsController</code> is there to provide a method to create comments and delete
spam comments when they arrive.</p>
<p>So first, we'll wire up the Article show template
(<code>app/views/articles/show.html.erb</code>) to let us make a new comment:</p>
<pre><code class="hljs css language-html+erb"><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">strong</span>&gt;</span>Title:<span class="hljs-tag">&lt;/<span class="hljs-name">strong</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">%=</span></span></span><span class="ruby"> @article.title </span><span class="xml"><span class="hljs-tag">%&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">strong</span>&gt;</span>Text:<span class="hljs-tag">&lt;/<span class="hljs-name">strong</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">%=</span></span></span><span class="ruby"> @article.text </span><span class="xml"><span class="hljs-tag">%&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>Add a comment:<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">%=</span></span></span><span class="ruby"> form_with(<span class="hljs-symbol">model:</span> [ @article, @article.comments.build ], <span class="hljs-symbol">local:</span> <span class="hljs-literal">true</span>) <span class="hljs-keyword">do</span> <span class="hljs-params">|form|</span> </span><span class="xml"><span class="hljs-tag">%&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">%=</span></span></span><span class="ruby"> form.label <span class="hljs-symbol">:commenter</span> </span><span class="xml"><span class="hljs-tag">%&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">%=</span></span></span><span class="ruby"> form.text_field <span class="hljs-symbol">:commenter</span> </span><span class="xml"><span class="hljs-tag">%&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">%=</span></span></span><span class="ruby"> form.label <span class="hljs-symbol">:body</span> </span><span class="xml"><span class="hljs-tag">%&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">%=</span></span></span><span class="ruby"> form.text_area <span class="hljs-symbol">:body</span> </span><span class="xml"><span class="hljs-tag">%&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">%=</span></span></span><span class="ruby"> form.submit </span><span class="xml"><span class="hljs-tag">%&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">%</span></span></span><span class="ruby"> <span class="hljs-keyword">end</span> </span><span class="xml"><span class="hljs-tag">%&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">%=</span></span></span><span class="ruby"> link_to <span class="hljs-string">'Edit'</span>, edit_article_path(@article) </span><span class="xml"><span class="hljs-tag">%&gt;</span> |
<span class="hljs-tag">&lt;<span class="hljs-name">%=</span></span></span><span class="ruby"> link_to <span class="hljs-string">'Back'</span>, articles_path </span><span class="xml"><span class="hljs-tag">%&gt;</span>
</span></code></pre>
<p>This adds a form on the <code>Article</code> show page that creates a new comment by
calling the <code>CommentsController</code> <code>create</code> action. The <code>form_with</code> call here uses
an array, which will build a nested route, such as <code>/articles/1/comments</code>.</p>
<p>Let's wire up the <code>create</code> in <code>app/controllers/comments_controller.rb</code>:</p>
<pre><code class="hljs css language-ruby"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">CommentsController</span> &lt; ApplicationController</span>
  <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">create</span></span>
    @article = Article.find(params[<span class="hljs-symbol">:article_id</span>])
    @comment = @article.comments.create(comment_params)
    redirect_to article_path(@article)
  <span class="hljs-keyword">end</span>

  private
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">comment_params</span></span>
      params.<span class="hljs-keyword">require</span>(<span class="hljs-symbol">:comment</span>).permit(<span class="hljs-symbol">:commenter</span>, <span class="hljs-symbol">:body</span>)
    <span class="hljs-keyword">end</span>
<span class="hljs-keyword">end</span>
</code></pre>
<p>You'll see a bit more complexity here than you did in the controller for
articles. That's a side-effect of the nesting that you've set up. Each request
for a comment has to keep track of the article to which the comment is attached,
thus the initial call to the <code>find</code> method of the <code>Article</code> model to get the
article in question.</p>
<p>In addition, the code takes advantage of some of the methods available for an
association. We use the <code>create</code> method on <code>@article.comments</code> to create and
save the comment. This will automatically link the comment so that it belongs to
that particular article.</p>
<p>Once we have made the new comment, we send the user back to the original article
using the <code>article_path(@article)</code> helper. As we have already seen, this calls
the <code>show</code> action of the <code>ArticlesController</code> which in turn renders the
<code>show.html.erb</code> template. This is where we want the comment to show, so let's
add that to the <code>app/views/articles/show.html.erb</code>.</p>
<pre><code class="hljs css language-html+erb"><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">strong</span>&gt;</span>Title:<span class="hljs-tag">&lt;/<span class="hljs-name">strong</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">%=</span></span></span><span class="ruby"> @article.title </span><span class="xml"><span class="hljs-tag">%&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">strong</span>&gt;</span>Text:<span class="hljs-tag">&lt;/<span class="hljs-name">strong</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">%=</span></span></span><span class="ruby"> @article.text </span><span class="xml"><span class="hljs-tag">%&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>Comments<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">%</span></span></span><span class="ruby"> @article.comments.each <span class="hljs-keyword">do</span> <span class="hljs-params">|comment|</span> </span><span class="xml"><span class="hljs-tag">%&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">strong</span>&gt;</span>Commenter:<span class="hljs-tag">&lt;/<span class="hljs-name">strong</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">%=</span></span></span><span class="ruby"> comment.commenter </span><span class="xml"><span class="hljs-tag">%&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>

  <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">strong</span>&gt;</span>Comment:<span class="hljs-tag">&lt;/<span class="hljs-name">strong</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">%=</span></span></span><span class="ruby"> comment.body </span><span class="xml"><span class="hljs-tag">%&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">%</span></span></span><span class="ruby"> <span class="hljs-keyword">end</span> </span><span class="xml"><span class="hljs-tag">%&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>Add a comment:<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">%=</span></span></span><span class="ruby"> form_with(<span class="hljs-symbol">model:</span> [ @article, @article.comments.build ], <span class="hljs-symbol">local:</span> <span class="hljs-literal">true</span>) <span class="hljs-keyword">do</span> <span class="hljs-params">|form|</span> </span><span class="xml"><span class="hljs-tag">%&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">%=</span></span></span><span class="ruby"> form.label <span class="hljs-symbol">:commenter</span> </span><span class="xml"><span class="hljs-tag">%&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">%=</span></span></span><span class="ruby"> form.text_field <span class="hljs-symbol">:commenter</span> </span><span class="xml"><span class="hljs-tag">%&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">%=</span></span></span><span class="ruby"> form.label <span class="hljs-symbol">:body</span> </span><span class="xml"><span class="hljs-tag">%&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">%=</span></span></span><span class="ruby"> form.text_area <span class="hljs-symbol">:body</span> </span><span class="xml"><span class="hljs-tag">%&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">%=</span></span></span><span class="ruby"> form.submit </span><span class="xml"><span class="hljs-tag">%&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">%</span></span></span><span class="ruby"> <span class="hljs-keyword">end</span> </span><span class="xml"><span class="hljs-tag">%&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">%=</span></span></span><span class="ruby"> link_to <span class="hljs-string">'Edit'</span>, edit_article_path(@article) </span><span class="xml"><span class="hljs-tag">%&gt;</span> |
<span class="hljs-tag">&lt;<span class="hljs-name">%=</span></span></span><span class="ruby"> link_to <span class="hljs-string">'Back'</span>, articles_path </span><span class="xml"><span class="hljs-tag">%&gt;</span>
</span></code></pre>
<p>Now you can add articles and comments to your blog and have them show up in the
right places.</p>
<p><img src="https://edgeguides.rubyonrails.org/images/getting_started/article_with_comments.png" alt="Article with Comments"></p>
<h2><a class="anchor" aria-hidden="true" id="refactoring"></a><a href="#refactoring" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Refactoring</h2>
<p>Now that we have articles and comments working, take a look at the
<code>app/views/articles/show.html.erb</code> template. It is getting long and awkward. We
can use partials to clean it up.</p>
<h3><a class="anchor" aria-hidden="true" id="rendering-partial-collections"></a><a href="#rendering-partial-collections" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Rendering Partial Collections</h3>
<p>First, we will make a comment partial to extract showing all the comments for
the article. Create the file <code>app/views/comments/_comment.html.erb</code> and put the
following into it:</p>
<pre><code class="hljs css language-html+erb"><span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">strong</span>&gt;</span>Commenter:<span class="hljs-tag">&lt;/<span class="hljs-name">strong</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">%=</span> <span class="hljs-attr">comment.commenter</span> %&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">strong</span>&gt;</span>Comment:<span class="hljs-tag">&lt;/<span class="hljs-name">strong</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">%=</span> <span class="hljs-attr">comment.body</span> %&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
</code></pre>
<p>Then you can change <code>app/views/articles/show.html.erb</code> to look like the
following:</p>
<pre><code class="hljs css language-html+erb"><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">strong</span>&gt;</span>Title:<span class="hljs-tag">&lt;/<span class="hljs-name">strong</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">%=</span></span></span><span class="ruby"> @article.title </span><span class="xml"><span class="hljs-tag">%&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">strong</span>&gt;</span>Text:<span class="hljs-tag">&lt;/<span class="hljs-name">strong</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">%=</span></span></span><span class="ruby"> @article.text </span><span class="xml"><span class="hljs-tag">%&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>Comments<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">%=</span></span></span><span class="ruby"> render @article.comments </span><span class="xml"><span class="hljs-tag">%&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>Add a comment:<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">%=</span></span></span><span class="ruby"> form_with(<span class="hljs-symbol">model:</span> [ @article, @article.comments.build ], <span class="hljs-symbol">local:</span> <span class="hljs-literal">true</span>) <span class="hljs-keyword">do</span> <span class="hljs-params">|form|</span> </span><span class="xml"><span class="hljs-tag">%&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">%=</span></span></span><span class="ruby"> form.label <span class="hljs-symbol">:commenter</span> </span><span class="xml"><span class="hljs-tag">%&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">%=</span></span></span><span class="ruby"> form.text_field <span class="hljs-symbol">:commenter</span> </span><span class="xml"><span class="hljs-tag">%&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">%=</span></span></span><span class="ruby"> form.label <span class="hljs-symbol">:body</span> </span><span class="xml"><span class="hljs-tag">%&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">%=</span></span></span><span class="ruby"> form.text_area <span class="hljs-symbol">:body</span> </span><span class="xml"><span class="hljs-tag">%&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">%=</span></span></span><span class="ruby"> form.submit </span><span class="xml"><span class="hljs-tag">%&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">%</span></span></span><span class="ruby"> <span class="hljs-keyword">end</span> </span><span class="xml"><span class="hljs-tag">%&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">%=</span></span></span><span class="ruby"> link_to <span class="hljs-string">'Edit'</span>, edit_article_path(@article) </span><span class="xml"><span class="hljs-tag">%&gt;</span> |
<span class="hljs-tag">&lt;<span class="hljs-name">%=</span></span></span><span class="ruby"> link_to <span class="hljs-string">'Back'</span>, articles_path </span><span class="xml"><span class="hljs-tag">%&gt;</span>
</span></code></pre>
<p>This will now render the partial in <code>app/views/comments/_comment.html.erb</code> once
for each comment that is in the <code>@article.comments</code> collection. As the <code>render</code>
method iterates over the <code>@article.comments</code> collection, it assigns each
comment to a local variable named the same as the partial, in this case
<code>comment</code>, which is then available in the partial for us to show.</p>
<h3><a class="anchor" aria-hidden="true" id="rendering-a-partial-form"></a><a href="#rendering-a-partial-form" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Rendering a Partial Form</h3>
<p>Let us also move that new comment section out to its own partial. Again, you
create a file <code>app/views/comments/_form.html.erb</code> containing:</p>
<pre><code class="hljs css language-html+erb"><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">%=</span></span></span><span class="ruby"> form_with(<span class="hljs-symbol">model:</span> [ @article, @article.comments.build ], <span class="hljs-symbol">local:</span> <span class="hljs-literal">true</span>) <span class="hljs-keyword">do</span> <span class="hljs-params">|form|</span> </span><span class="xml"><span class="hljs-tag">%&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">%=</span></span></span><span class="ruby"> form.label <span class="hljs-symbol">:commenter</span> </span><span class="xml"><span class="hljs-tag">%&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">%=</span></span></span><span class="ruby"> form.text_field <span class="hljs-symbol">:commenter</span> </span><span class="xml"><span class="hljs-tag">%&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">%=</span></span></span><span class="ruby"> form.label <span class="hljs-symbol">:body</span> </span><span class="xml"><span class="hljs-tag">%&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">%=</span></span></span><span class="ruby"> form.text_area <span class="hljs-symbol">:body</span> </span><span class="xml"><span class="hljs-tag">%&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">%=</span></span></span><span class="ruby"> form.submit </span><span class="xml"><span class="hljs-tag">%&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">%</span></span></span><span class="ruby"> <span class="hljs-keyword">end</span> </span><span class="xml"><span class="hljs-tag">%&gt;</span>
</span></code></pre>
<p>Then you make the <code>app/views/articles/show.html.erb</code> look like the following:</p>
<pre><code class="hljs css language-html+erb"><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">strong</span>&gt;</span>Title:<span class="hljs-tag">&lt;/<span class="hljs-name">strong</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">%=</span></span></span><span class="ruby"> @article.title </span><span class="xml"><span class="hljs-tag">%&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">strong</span>&gt;</span>Text:<span class="hljs-tag">&lt;/<span class="hljs-name">strong</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">%=</span></span></span><span class="ruby"> @article.text </span><span class="xml"><span class="hljs-tag">%&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>Comments<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">%=</span></span></span><span class="ruby"> render @article.comments </span><span class="xml"><span class="hljs-tag">%&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>Add a comment:<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">%=</span></span></span><span class="ruby"> render <span class="hljs-string">'comments/form'</span> </span><span class="xml"><span class="hljs-tag">%&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">%=</span></span></span><span class="ruby"> link_to <span class="hljs-string">'Edit'</span>, edit_article_path(@article) </span><span class="xml"><span class="hljs-tag">%&gt;</span> |
<span class="hljs-tag">&lt;<span class="hljs-name">%=</span></span></span><span class="ruby"> link_to <span class="hljs-string">'Back'</span>, articles_path </span><span class="xml"><span class="hljs-tag">%&gt;</span>
</span></code></pre>
<p>The second render just defines the partial template we want to render,
<code>comments/form</code>. Rails is smart enough to spot the forward slash in that
string and realize that you want to render the <code>_form.html.erb</code> file in
the <code>app/views/comments</code> directory.</p>
<p>The <code>@article</code> object is available to any partials rendered in the view because
we defined it as an instance variable.</p>
<h2><a class="anchor" aria-hidden="true" id="deleting-comments"></a><a href="#deleting-comments" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Deleting Comments</h2>
<p>Another important feature of a blog is being able to delete spam comments. To do
this, we need to implement a link of some sort in the view and a <code>destroy</code>
action in the <code>CommentsController</code>.</p>
<p>So first, let's add the delete link in the
<code>app/views/comments/_comment.html.erb</code> partial:</p>
<pre><code class="hljs css language-html+erb"><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">strong</span>&gt;</span>Commenter:<span class="hljs-tag">&lt;/<span class="hljs-name">strong</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">%=</span></span></span><span class="ruby"> comment.commenter </span><span class="xml"><span class="hljs-tag">%&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">strong</span>&gt;</span>Comment:<span class="hljs-tag">&lt;/<span class="hljs-name">strong</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">%=</span></span></span><span class="ruby"> comment.body </span><span class="xml"><span class="hljs-tag">%&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">%=</span></span></span><span class="ruby"> link_to <span class="hljs-string">'Destroy Comment'</span>, [comment.article, comment],
               <span class="hljs-symbol">method:</span> <span class="hljs-symbol">:delete</span>,
               <span class="hljs-symbol">data:</span> { <span class="hljs-symbol">confirm:</span> <span class="hljs-string">'Are you sure?'</span> } </span><span class="xml"><span class="hljs-tag">%&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
</span></code></pre>
<p>Clicking this new &quot;Destroy Comment&quot; link will fire off a <code>DELETE /articles/:article_id/comments/:id</code> to our <code>CommentsController</code>, which can then
use this to find the comment we want to delete, so let's add a <code>destroy</code> action
to our controller (<code>app/controllers/comments_controller.rb</code>):</p>
<pre><code class="hljs css language-ruby"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">CommentsController</span> &lt; ApplicationController</span>
  <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">create</span></span>
    @article = Article.find(params[<span class="hljs-symbol">:article_id</span>])
    @comment = @article.comments.create(comment_params)
    redirect_to article_path(@article)
  <span class="hljs-keyword">end</span>

  <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">destroy</span></span>
    @article = Article.find(params[<span class="hljs-symbol">:article_id</span>])
    @comment = @article.comments.find(params[<span class="hljs-symbol">:id</span>])
    @comment.destroy
    redirect_to article_path(@article)
  <span class="hljs-keyword">end</span>

  private
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">comment_params</span></span>
      params.<span class="hljs-keyword">require</span>(<span class="hljs-symbol">:comment</span>).permit(<span class="hljs-symbol">:commenter</span>, <span class="hljs-symbol">:body</span>)
    <span class="hljs-keyword">end</span>
<span class="hljs-keyword">end</span>
</code></pre>
<p>The <code>destroy</code> action will find the article we are looking at, locate the comment
within the <code>@article.comments</code> collection, and then remove it from the
database and send us back to the show action for the article.</p>
<h3><a class="anchor" aria-hidden="true" id="deleting-associated-objects"></a><a href="#deleting-associated-objects" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Deleting Associated Objects</h3>
<p>If you delete an article, its associated comments will also need to be
deleted, otherwise they would simply occupy space in the database. Rails allows
you to use the <code>dependent</code> option of an association to achieve this. Modify the
Article model, <code>app/models/article.rb</code>, as follows:</p>
<pre><code class="hljs css language-ruby"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Article</span> &lt; ApplicationRecord</span>
  has_many <span class="hljs-symbol">:comments</span>, <span class="hljs-symbol">dependent:</span> <span class="hljs-symbol">:destroy</span>
  validates <span class="hljs-symbol">:title</span>, <span class="hljs-symbol">presence:</span> <span class="hljs-literal">true</span>,
                    <span class="hljs-symbol">length:</span> { <span class="hljs-symbol">minimum:</span> <span class="hljs-number">5</span> }
<span class="hljs-keyword">end</span>
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="security"></a><a href="#security" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Security</h2>
<h3><a class="anchor" aria-hidden="true" id="basic-authentication"></a><a href="#basic-authentication" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Basic Authentication</h3>
<p>If you were to publish your blog online, anyone would be able to add, edit and
delete articles or delete comments.</p>
<p>Rails provides a very simple HTTP authentication system that will work nicely in
this situation.</p>
<p>In the <code>ArticlesController</code> we need to have a way to block access to the
various actions if the person is not authenticated. Here we can use the Rails
<code>http_basic_authenticate_with</code> method, which allows access to the requested
action if that method allows it.</p>
<p>To use the authentication system, we specify it at the top of our
<code>ArticlesController</code> in <code>app/controllers/articles_controller.rb</code>. In our case,
we want the user to be authenticated on every action except <code>index</code> and <code>show</code>,
so we write that:</p>
<pre><code class="hljs css language-ruby"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ArticlesController</span> &lt; ApplicationController</span>

  http_basic_authenticate_with <span class="hljs-symbol">name:</span> <span class="hljs-string">"dhh"</span>, <span class="hljs-symbol">password:</span> <span class="hljs-string">"secret"</span>, <span class="hljs-symbol">except:</span> [<span class="hljs-symbol">:index</span>, <span class="hljs-symbol">:show</span>]

  <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">index</span></span>
    @articles = Article.all
  <span class="hljs-keyword">end</span>

  <span class="hljs-comment"># snippet for brevity</span>
</code></pre>
<p>We also want to allow only authenticated users to delete comments, so in the
<code>CommentsController</code> (<code>app/controllers/comments_controller.rb</code>) we write:</p>
<pre><code class="hljs css language-ruby"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">CommentsController</span> &lt; ApplicationController</span>

  http_basic_authenticate_with <span class="hljs-symbol">name:</span> <span class="hljs-string">"dhh"</span>, <span class="hljs-symbol">password:</span> <span class="hljs-string">"secret"</span>, <span class="hljs-symbol">only:</span> <span class="hljs-symbol">:destroy</span>

  <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">create</span></span>
    @article = Article.find(params[<span class="hljs-symbol">:article_id</span>])
    <span class="hljs-comment"># ...</span>
  <span class="hljs-keyword">end</span>

  <span class="hljs-comment"># snippet for brevity</span>
</code></pre>
<p>Now if you try to create a new article, you will be greeted with a basic HTTP
Authentication challenge:</p>
<p><img src="https://edgeguides.rubyonrails.org/images/getting_started/challenge.png" alt="Basic HTTP Authentication Challenge"></p>
<p>Other authentication methods are available for Rails applications. Two popular
authentication add-ons for Rails are the
<a href="https://github.com/plataformatec/devise">Devise</a> rails engine and
the <a href="https://github.com/binarylogic/authlogic">Authlogic</a> gem,
along with a number of others.</p>
<h3><a class="anchor" aria-hidden="true" id="other-security-considerations"></a><a href="#other-security-considerations" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Other Security Considerations</h3>
<p>Security, especially in web applications, is a broad and detailed area. Security
in your Rails application is covered in more depth in
the <a href="/rails-setup/docs/rails/securing-rails">Ruby on Rails Security Guide</a>.</p>
<h2><a class="anchor" aria-hidden="true" id="what-s-next"></a><a href="#what-s-next" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>What's Next?</h2>
<p>Now that you've seen your first Rails application, you should feel free to
update it and experiment on your own.</p>
<p>Remember, you don't have to do everything without help. As you need assistance
getting up and running with Rails, feel free to consult these support
resources:</p>
<ul>
<li>The <a href="index.md">Ruby on Rails Guides</a></li>
<li>The <a href="https://www.railstutorial.org/book">Ruby on Rails Tutorial</a></li>
<li>The <a href="https://groups.google.com/group/rubyonrails-talk">Ruby on Rails mailing list</a></li>
<li>The <a href="irc://irc.freenode.net/#rubyonrails">#rubyonrails</a> channel on irc.freenode.net</li>
</ul>
<h2><a class="anchor" aria-hidden="true" id="configuration-gotchas"></a><a href="#configuration-gotchas" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Configuration Gotchas</h2>
<p>The easiest way to work with Rails is to store all external data as UTF-8. If
you don't, Ruby libraries and Rails will often be able to convert your native
data into UTF-8, but this doesn't always work reliably, so you're better off
ensuring that all external data is UTF-8.</p>
<p>If you have made a mistake in this area, the most common symptom is a black
diamond with a question mark inside appearing in the browser. Another common
symptom is characters like &quot;Ã¼&quot; appearing instead of &quot;ü&quot;. Rails takes a number
of internal steps to mitigate common causes of these problems that can be
automatically detected and corrected. However, if you have external data that is
not stored as UTF-8, it can occasionally result in these kinds of issues that
cannot be automatically detected by Rails and corrected.</p>
<p>Two very common sources of data that are not UTF-8:</p>
<ul>
<li>Your text editor: Most text editors (such as TextMate), default to saving
files as UTF-8. If your text editor does not, this can result in special
characters that you enter in your templates (such as é) to appear as a diamond
with a question mark inside in the browser. This also applies to your i18n
translation files. Most editors that do not already default to UTF-8 (such as
some versions of Dreamweaver) offer a way to change the default to UTF-8. Do
so.</li>
<li>Your database: Rails defaults to converting data from your database into UTF-8
at the boundary. However, if your database is not using UTF-8 internally, it
may not be able to store all characters that your users enter. For instance,
if your database is using Latin-1 internally, and your user enters a Russian,
Hebrew, or Japanese character, the data will be lost forever once it enters
the database. If possible, use UTF-8 as the internal storage of your database.</li>
</ul>
</span></div></article></div><div class="docLastUpdate"><em>Last updated on 2019-7-7</em></div><div class="docs-prevnext"><a class="docs-next button" href="/rails-setup/docs/rails/development-dependencies-install"><span>Development Dependencies Install</span><span class="arrow-next"> →</span></a></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#guide-assumptions">Guide Assumptions</a></li><li><a href="#what-is-rails">What is Rails?</a></li><li><a href="#creating-a-new-rails-project">Creating a New Rails Project</a><ul class="toc-headings"><li><a href="#installing-rails">Installing Rails</a></li><li><a href="#creating-the-blog-application">Creating the Blog Application</a></li></ul></li><li><a href="#hello-rails">Hello, Rails!</a><ul class="toc-headings"><li><a href="#starting-up-the-web-server">Starting up the Web Server</a></li><li><a href="#say-hello-rails">Say &quot;Hello&quot;, Rails</a></li><li><a href="#setting-the-application-home-page">Setting the Application Home Page</a></li></ul></li><li><a href="#getting-up-and-running">Getting Up and Running</a><ul class="toc-headings"><li><a href="#laying-down-the-groundwork">Laying down the groundwork</a></li><li><a href="#the-first-form">The first form</a></li><li><a href="#creating-articles">Creating articles</a></li><li><a href="#creating-the-article-model">Creating the Article model</a></li><li><a href="#running-a-migration">Running a Migration</a></li><li><a href="#saving-data-in-the-controller">Saving data in the controller</a></li><li><a href="#showing-articles">Showing Articles</a></li><li><a href="#listing-all-articles">Listing all articles</a></li><li><a href="#adding-links">Adding links</a></li><li><a href="#adding-some-validation">Adding Some Validation</a></li><li><a href="#updating-articles">Updating Articles</a></li><li><a href="#using-partials-to-clean-up-duplication-in-views">Using partials to clean up duplication in views</a></li><li><a href="#deleting-articles">Deleting Articles</a></li></ul></li><li><a href="#adding-a-second-model">Adding a Second Model</a><ul class="toc-headings"><li><a href="#generating-a-model">Generating a Model</a></li><li><a href="#associating-models">Associating Models</a></li><li><a href="#adding-a-route-for-comments">Adding a Route for Comments</a></li><li><a href="#generating-a-controller">Generating a Controller</a></li></ul></li><li><a href="#refactoring">Refactoring</a><ul class="toc-headings"><li><a href="#rendering-partial-collections">Rendering Partial Collections</a></li><li><a href="#rendering-a-partial-form">Rendering a Partial Form</a></li></ul></li><li><a href="#deleting-comments">Deleting Comments</a><ul class="toc-headings"><li><a href="#deleting-associated-objects">Deleting Associated Objects</a></li></ul></li><li><a href="#security">Security</a><ul class="toc-headings"><li><a href="#basic-authentication">Basic Authentication</a></li><li><a href="#other-security-considerations">Other Security Considerations</a></li></ul></li><li><a href="#what-s-next">What's Next?</a></li><li><a href="#configuration-gotchas">Configuration Gotchas</a></li></ul></nav></div><footer class="nav-footer" id="footer"><section class="copyright">Rails Setup 2019</section></footer></div></body></html>